{"ast":null,"code":"var _jsxFileName = \"/Users/anbschool0009/Desktop/IA-Mate_project/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback, useMemo } from 'react';\nimport * as d3 from 'd3';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [iaData, setIaData] = useState(null);\n  const [graphData, setGraphData] = useState({\n    nodes: [],\n    links: []\n  });\n  const [selectedNodeId, setSelectedNodeId] = useState(null);\n  const [snapToGrid, setSnapToGrid] = useState(false);\n  const [editingNodeId, setEditingNodeId] = useState(null);\n  const [editingText, setEditingText] = useState('');\n  const [linkCreation, setLinkCreation] = useState({\n    active: false,\n    sourceId: null\n  });\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [width, setWidth] = useState(800);\n  const [height, setHeight] = useState(600);\n  const [collapsedNodes, setCollapsedNodes] = useState(new Set());\n  const svgRef = useRef();\n  const zoomRef = useRef();\n  const gRef = useRef();\n  const simulationRef = useRef();\n  const colors = useMemo(() => ['#dbeafe', '#dcfce7', '#f3e8ff', '#fef3c7', '#f0f9ff'], []); // Pastel colors for levels\n\n  const hierarchyToGraph = useCallback((data, collapsed) => {\n    const nodes = [];\n    const links = [];\n    const nodeMap = new Map();\n\n    // Use tree layout for initial positions to avoid random overlaps\n    const treeLayout = d3.tree().size([height - 100, width - 200]);\n    const root = d3.hierarchy(data);\n    treeLayout(root);\n    const traverse = (d, parentId = null, depth = 0) => {\n      const id = nodes.length;\n      const hasChildren = d.children && d.children.length > 0;\n      nodes.push({\n        id,\n        name: d.data.name,\n        type: d.data.type || 'action',\n        x: d.y + width / 2,\n        // Horizontal tree\n        y: d.x + height / 2,\n        depth,\n        fx: d.y + width / 2,\n        fy: d.x + height / 2,\n        hasChildren\n      });\n      nodeMap.set(d.data.name, id);\n      if (parentId !== null) {\n        links.push({\n          source: parentId,\n          target: id,\n          label: d.data.label || ''\n        });\n      }\n      if (d.children && !collapsed.has(parentId)) {\n        d.children.forEach(child => traverse(child, id, depth + 1));\n      }\n    };\n    traverse(root);\n    return {\n      nodes,\n      links\n    };\n  }, [width, height]);\n  useEffect(() => {\n    const handleResize = () => {\n      setWidth(window.innerWidth - 40);\n      setHeight(window.innerHeight - 200);\n    };\n    handleResize();\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n  const handleFileUpload = async event => {\n    const file = event.target.files[0];\n    if (!file) return;\n    if (!file.name.endsWith('.json')) {\n      setError('Please select a JSON file.');\n      return;\n    }\n    setLoading(true);\n    setError('');\n    try {\n      const text = await file.text();\n      const jsonData = JSON.parse(text);\n      const response = await fetch('http://localhost:3001/upload', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(jsonData)\n      });\n      if (response.ok) {\n        setIaData(jsonData);\n        fetchData();\n      } else {\n        setError('Failed to upload JSON.');\n      }\n    } catch (err) {\n      setError('Invalid JSON file.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    if (iaData) {\n      setGraphData(hierarchyToGraph(iaData, collapsedNodes));\n    }\n  }, [iaData, hierarchyToGraph, collapsedNodes]);\n  const fetchData = async () => {\n    try {\n      const response = await fetch('http://localhost:3001/ia');\n      if (response.ok) {\n        const data = await response.json();\n        setIaData(data);\n        setError('');\n      } else {\n        setIaData(null);\n        setError('No IA data uploaded yet.');\n      }\n    } catch (err) {\n      setError('Failed to fetch data.');\n    }\n  };\n  const zoomIn = useCallback(() => {\n    if (zoomRef.current) {\n      const currentTransform = d3.zoomTransform(svgRef.current);\n      zoomRef.current.transform(svgRef.current, currentTransform.scaleBy(1.2));\n    }\n  }, []);\n  const zoomOut = useCallback(() => {\n    if (zoomRef.current) {\n      const currentTransform = d3.zoomTransform(svgRef.current);\n      zoomRef.current.transform(svgRef.current, currentTransform.scaleBy(0.8));\n    }\n  }, []);\n  const fitToScreen = useCallback(() => {\n    if (gRef.current && svgRef.current) {\n      const bounds = gRef.current.getBBox();\n      const fullWidth = width;\n      const fullHeight = height;\n      const midX = bounds.x + bounds.width / 2;\n      const midY = bounds.y + bounds.height / 2;\n      const scale = 0.85;\n      const translate = [fullWidth / 2 - scale * midX, fullHeight / 2 - scale * midY];\n      zoomRef.current.transform(svgRef.current, d3.zoomIdentity.translate(translate[0], translate[1]).scale(scale));\n    }\n  }, [width, height]);\n  const resetView = useCallback(() => {\n    if (zoomRef.current) {\n      zoomRef.current.transform(svgRef.current, d3.zoomIdentity);\n    }\n  }, []);\n  const toggleCollapse = useCallback(nodeId => {\n    setCollapsedNodes(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(nodeId)) {\n        newSet.delete(nodeId);\n      } else {\n        newSet.add(nodeId);\n      }\n      return newSet;\n    });\n  }, []);\n  const addNode = useCallback(() => {\n    const newId = graphData.nodes.length;\n    const newNode = {\n      id: newId,\n      name: `New Node ${newId}`,\n      x: width / 2 + Math.random() * 100 - 50,\n      y: height / 2 + Math.random() * 100 - 50,\n      depth: 0,\n      fx: null,\n      fy: null\n    };\n    const newLinks = [...graphData.links];\n    if (selectedNodeId !== null) {\n      newLinks.push({\n        source: selectedNodeId,\n        target: newId\n      });\n    }\n    setGraphData({\n      nodes: [...graphData.nodes, newNode],\n      links: newLinks\n    });\n  }, [graphData, selectedNodeId, width, height]);\n  const deleteNode = useCallback(() => {\n    if (selectedNodeId === null) return;\n    const newNodes = graphData.nodes.filter(n => n.id !== selectedNodeId);\n    const newLinks = graphData.links.filter(l => l.source.id !== selectedNodeId && l.target.id !== selectedNodeId);\n    setGraphData({\n      nodes: newNodes,\n      links: newLinks\n    });\n    setSelectedNodeId(null);\n  }, [graphData, selectedNodeId]);\n  const startEditing = useCallback(d => {\n    setEditingNodeId(d.id);\n    setEditingText(d.name);\n  }, []);\n  const saveEditing = useCallback(() => {\n    if (editingNodeId !== null) {\n      setGraphData(prev => ({\n        ...prev,\n        nodes: prev.nodes.map(n => n.id === editingNodeId ? {\n          ...n,\n          name: editingText\n        } : n)\n      }));\n      setEditingNodeId(null);\n      setEditingText('');\n    }\n  }, [editingNodeId, editingText]);\n  const cancelEditing = useCallback(() => {\n    setEditingNodeId(null);\n    setEditingText('');\n  }, []);\n  const startLinkCreation = useCallback(sourceId => {\n    setLinkCreation({\n      active: true,\n      sourceId\n    });\n  }, []);\n  const updateDragLine = useCallback(event => {\n    if (!linkCreation.active) return;\n    const [x, y] = d3.pointer(event, svgRef.current);\n    const sourceNode = graphData.nodes.find(n => n.id === linkCreation.sourceId);\n    if (sourceNode && gRef.current) {\n      const path = d3.select(gRef.current).select('.drag-line');\n      path.attr('d', `M${sourceNode.x},${sourceNode.y}L${x},${y}`);\n    }\n  }, [linkCreation, graphData]);\n  const endLinkCreation = useCallback(event => {\n    if (!linkCreation.active) return;\n    const [x, y] = d3.pointer(event, svgRef.current);\n    const targetNode = graphData.nodes.find(n => {\n      const dx = x - (n.x || width / 2);\n      const dy = y - (n.y || height / 2);\n      return Math.sqrt(dx * dx + dy * dy) < 60; // Within 60px radius\n    });\n    if (targetNode && targetNode.id !== linkCreation.sourceId) {\n      setGraphData(prev => ({\n        ...prev,\n        links: [...prev.links, {\n          source: linkCreation.sourceId,\n          target: targetNode.id\n        }]\n      }));\n    }\n    setLinkCreation({\n      active: false,\n      sourceId: null\n    });\n    if (gRef.current) {\n      d3.select(gRef.current).select('.drag-line').attr('d', 'M0,0L0,0');\n    }\n  }, [linkCreation, graphData, width, height]);\n  useEffect(() => {\n    fetchData();\n  }, []);\n  useEffect(() => {\n    if (!graphData.nodes.length || error) return;\n    const svg = d3.select(svgRef.current);\n    svg.selectAll('*').remove();\n\n    // Add zoom and pan with smooth transitions\n    zoomRef.current = d3.zoom().scaleExtent([0.1, 4]).on('zoom', event => {\n      if (gRef.current) gRef.current.attr('transform', event.transform);\n    });\n    svg.call(zoomRef.current);\n    const g = svg.append('g').attr('ref', gRef);\n\n    // Enhanced defs for arrow markers, shadow, and glow\n    const defs = svg.append('defs');\n\n    // Arrowhead\n    defs.append('marker').attr('id', 'arrowhead').attr('viewBox', '-0 -5 10 10').attr('refX', 15).attr('refY', 0).attr('orient', 'auto').attr('markerWidth', 8).attr('markerHeight', 8).attr('xoverflow', 'visible').append('path').attr('d', 'M 0,-5 L 10 ,0 L 0,5').attr('fill', '#6b7280').attr('stroke', 'none');\n\n    // Soft shadow\n    const shadowFilter = defs.append('filter').attr('id', 'shadow').attr('x', '-50%').attr('y', '-50%').attr('width', '200%').attr('height', '200%');\n    shadowFilter.append('feDropShadow').attr('dx', 1).attr('dy', 1).attr('stdDeviation', 3).attr('flood-color', 'rgba(0,0,0,0.2)');\n\n    // Glow for hover\n    const glowFilter = defs.append('filter').attr('id', 'glow').attr('x', '-50%').attr('y', '-50%').attr('width', '200%').attr('height', '200%');\n    glowFilter.append('feGaussianBlur').attr('stdDeviation', 3).attr('result', 'coloredBlur');\n    const feMerge = glowFilter.append('feMerge');\n    feMerge.append('feMergeNode').attr('in', 'coloredBlur');\n    feMerge.append('feMergeNode').attr('in', 'SourceGraphic');\n\n    // Drag line for edge creation\n    g.append('path').attr('class', 'drag-line').attr('stroke', '#999').attr('stroke-width', 2).attr('fill', 'none').attr('d', 'M0,0L0,0').style('pointer-events', 'none');\n\n    // Smooth curved links\n    const link = g.selectAll('.link').data(graphData.links).enter().append('path').attr('class', 'link').attr('fill', 'none').attr('marker-end', 'url(#arrowhead)').attr('stroke', '#9ca3af').attr('stroke-width', 2).style('transition', 'stroke 0.3s ease, stroke-width 0.3s ease');\n\n    // Link labels\n    const linkLabel = g.selectAll('.link-label').data(graphData.links).enter().append('text').attr('class', 'link-label').attr('font-size', 10).attr('fill', '#6b7280').attr('text-anchor', 'middle').attr('dominant-baseline', 'middle').style('pointer-events', 'none').text(d => d.label || '');\n\n    // Nodes with animations, hover glow\n    const node = g.selectAll('.node').data(graphData.nodes).enter().append('g').classed('node', true).attr('opacity', 0).style('transition', 'opacity 0.5s ease').call(d3.drag().on('start', dragstarted).on('drag', dragged).on('end', dragended)).on('click', (event, d) => {\n      if (editingNodeId !== null) {\n        saveEditing();\n      }\n      if (d.hasChildren) {\n        toggleCollapse(d.id);\n      } else {\n        setSelectedNodeId(d.id);\n      }\n    }).on('dblclick', (event, d) => {\n      event.stopPropagation();\n      startEditing(d);\n    }).on('mouseover', function (event, d) {\n      d3.select(this).select('rect').attr('filter', 'url(#glow)').attr('stroke', '#3b82f6').attr('stroke-width', 4);\n      // Highlight connected links (incoming and outgoing)\n      g.selectAll('.link').filter(l => l.source.id === d.id || l.target.id === d.id).attr('stroke', '#3b82f6').attr('stroke-width', 3);\n    }).on('mouseout', function (event, d) {\n      d3.select(this).select('rect').attr('filter', 'url(#shadow)').attr('stroke', selectedNodeId === d.id ? '#3b82f6' : colors[d.depth % colors.length]).attr('stroke-width', selectedNodeId === d.id ? 3 : 2);\n      g.selectAll('.link').attr('stroke', '#9ca3af').attr('stroke-width', 2);\n    });\n\n    // Animate nodes in with fade and scale up\n    node.attr('opacity', 0).attr('transform', d => `translate(${d.x || width / 2}, ${d.y || height / 2}) scale(0.5)`).transition().duration(500).attr('opacity', 1).attr('transform', d => `translate(${d.x || width / 2}, ${d.y || height / 2}) scale(1)`);\n    node.append('rect').attr('width', 140).attr('height', 50).attr('x', -70).attr('y', -25).attr('rx', 10).attr('ry', 10).attr('fill', '#ffffff').attr('stroke', d => selectedNodeId === d.id ? '#3b82f6' : colors[d.depth % colors.length]).attr('stroke-width', d => selectedNodeId === d.id ? 3 : 2).attr('filter', 'url(#shadow)');\n    node.each(function (d) {\n      const group = d3.select(this);\n      if (d.id === editingNodeId) {\n        const foreignObject = group.append('foreignObject').attr('x', -60).attr('y', -10).attr('width', 120).attr('height', 20);\n        foreignObject.append('xhtml:input').attr('type', 'text').attr('value', editingText).style('width', '100%').style('height', '100%').style('border', 'none').style('outline', 'none').style('font-size', '12px').style('font-weight', 'bold').style('text-align', 'center').on('input', function (event) {\n          setEditingText(event.target.value);\n        }).on('keydown', function (event) {\n          if (event.key === 'Enter') {\n            saveEditing();\n          } else if (event.key === 'Escape') {\n            cancelEditing();\n          }\n        }).on('blur', saveEditing);\n      } else {\n        group.append('text').attr('text-anchor', 'middle').attr('x', 0).attr('y', 0).attr('dy', '.35em').attr('font-size', '12px').attr('font-weight', 'bold').attr('fill', '#1f2937').text(d => d.name).style('pointer-events', 'none');\n      }\n    });\n\n    // Force simulation\n    simulationRef.current = d3.forceSimulation(graphData.nodes).force('link', d3.forceLink(graphData.links).id(d => d.id).distance(150).strength(0.5)).force('charge', d3.forceManyBody().strength(-200)).force('x', d3.forceX(width / 2).strength(0.1)).force('y', d3.forceY(height / 2).strength(0.1)).force('collide', d3.forceCollide(80)).on('tick', ticked);\n    function ticked() {\n      link.attr('d', linkArc);\n      node.attr('transform', d => `translate(${d.x || width / 2},${d.y || height / 2})`);\n    }\n    function linkArc(d) {\n      const source = d.source;\n      const target = d.target;\n      const dx = target.x - source.x;\n      const dy = target.y - source.y;\n      const dr = Math.hypot(dx, dy);\n      return dr > 0 ? `M${source.x},${source.y}A${dr / 2},${dr / 2} 0 0,1 ${target.x},${target.y}` : '';\n    }\n    function dragstarted(event, d) {\n      if (!event.active) simulationRef.current.alphaTarget(0.3).restart();\n      d.fx = d.x;\n      d.fy = d.y;\n    }\n    function dragged(event, d) {\n      d.fx = snapToGrid ? Math.round(event.x / 20) * 20 : event.x;\n      d.fy = snapToGrid ? Math.round(event.y / 20) * 20 : event.y;\n      simulationRef.current.alpha(0.3);\n    }\n    function dragended(event, d) {\n      if (!event.active) simulationRef.current.alphaTarget(0);\n      // Keep fixed after drag for now\n    }\n  }, [graphData, error, width, height, colors, snapToGrid, selectedNodeId]);\n  useEffect(() => {\n    const handleKeyDown = event => {\n      if (event.target.tagName === 'INPUT' || event.target.tagName === 'TEXTAREA' || event.target.isContentEditable) {\n        return; // Don't interfere with input fields\n      }\n      switch (event.key) {\n        case '+':\n        case '=':\n          event.preventDefault();\n          zoomIn();\n          break;\n        case '-':\n          event.preventDefault();\n          zoomOut();\n          break;\n        case 'f':\n        case 'F':\n          event.preventDefault();\n          fitToScreen();\n          break;\n        case 'r':\n        case 'R':\n        case '0':\n          event.preventDefault();\n          resetView();\n          break;\n        default:\n          break;\n      }\n    };\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [zoomIn, zoomOut, fitToScreen, resetView]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col h-screen bg-gradient-to-br from-blue-50 to-indigo-100\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 bg-white shadow-sm border-b flex justify-between items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-2xl font-bold text-gray-800\",\n        children: \"IA Flowchart Diagram\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 547,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \".json\",\n          onChange: handleFileUpload,\n          disabled: loading,\n          className: \"file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 549,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: fetchData,\n          disabled: loading,\n          className: \"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50\",\n          children: \"Refresh\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 556,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 548,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 546,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"p-2 text-blue-500 text-center\",\n      children: \"Uploading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 565,\n      columnNumber: 19\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"p-2 text-red-500 text-center\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 566,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 relative\",\n      children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n        ref: svgRef,\n        width: width,\n        height: height,\n        className: \"absolute inset-0 w-full h-full bg-white\",\n        children: /*#__PURE__*/_jsxDEV(\"g\", {\n          ref: gRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 569,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 568,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute top-4 right-4 bg-white shadow-lg rounded-lg p-2 border flex flex-col space-y-1 z-10\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: zoomIn,\n          className: \"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded text-gray-700\",\n          children: \"+\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 573,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: zoomOut,\n          className: \"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded text-gray-700\",\n          children: \"-\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 574,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: fitToScreen,\n          className: \"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded text-gray-700\",\n          children: \"Fit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 575,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: resetView,\n          className: \"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded text-gray-700\",\n          children: \"Reset\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 576,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: addNode,\n          className: \"px-3 py-1 text-sm bg-blue-100 hover:bg-blue-200 rounded text-blue-700\",\n          children: \"Add\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 577,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: deleteNode,\n          disabled: selectedNodeId === null,\n          className: \"px-3 py-1 text-sm bg-red-100 hover:bg-red-200 rounded text-red-700 disabled:opacity-50\",\n          children: \"Del\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 578,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setSnapToGrid(!snapToGrid),\n          className: `px-3 py-1 text-sm rounded text-gray-700 ${snapToGrid ? 'bg-green-100' : 'bg-gray-100 hover:bg-gray-200'}`,\n          children: \"Grid\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 579,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 572,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 567,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 545,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"bFel7sMdM1ouhgLrUC0imbY7MJA=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","useMemo","d3","jsxDEV","_jsxDEV","App","_s","iaData","setIaData","graphData","setGraphData","nodes","links","selectedNodeId","setSelectedNodeId","snapToGrid","setSnapToGrid","editingNodeId","setEditingNodeId","editingText","setEditingText","linkCreation","setLinkCreation","active","sourceId","error","setError","loading","setLoading","width","setWidth","height","setHeight","collapsedNodes","setCollapsedNodes","Set","svgRef","zoomRef","gRef","simulationRef","colors","hierarchyToGraph","data","collapsed","nodeMap","Map","treeLayout","tree","size","root","hierarchy","traverse","d","parentId","depth","id","length","hasChildren","children","push","name","type","x","y","fx","fy","set","source","target","label","has","forEach","child","handleResize","window","innerWidth","innerHeight","addEventListener","removeEventListener","handleFileUpload","event","file","files","endsWith","text","jsonData","JSON","parse","response","fetch","method","headers","body","stringify","ok","fetchData","err","json","zoomIn","current","currentTransform","zoomTransform","transform","scaleBy","zoomOut","fitToScreen","bounds","getBBox","fullWidth","fullHeight","midX","midY","scale","translate","zoomIdentity","resetView","toggleCollapse","nodeId","prev","newSet","delete","add","addNode","newId","newNode","Math","random","newLinks","deleteNode","newNodes","filter","n","l","startEditing","saveEditing","map","cancelEditing","startLinkCreation","updateDragLine","pointer","sourceNode","find","path","select","attr","endLinkCreation","targetNode","dx","dy","sqrt","svg","selectAll","remove","zoom","scaleExtent","on","call","g","append","defs","shadowFilter","glowFilter","feMerge","style","link","enter","linkLabel","node","classed","drag","dragstarted","dragged","dragended","stopPropagation","transition","duration","each","group","foreignObject","value","key","forceSimulation","force","forceLink","distance","strength","forceManyBody","forceX","forceY","forceCollide","ticked","linkArc","dr","hypot","alphaTarget","restart","round","alpha","handleKeyDown","tagName","isContentEditable","preventDefault","document","className","fileName","_jsxFileName","lineNumber","columnNumber","accept","onChange","disabled","onClick","ref","_c","$RefreshReg$"],"sources":["/Users/anbschool0009/Desktop/IA-Mate_project/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback, useMemo } from 'react';\nimport * as d3 from 'd3';\n\nfunction App() {\n  const [iaData, setIaData] = useState(null);\n  const [graphData, setGraphData] = useState({ nodes: [], links: [] });\n  const [selectedNodeId, setSelectedNodeId] = useState(null);\n  const [snapToGrid, setSnapToGrid] = useState(false);\n  const [editingNodeId, setEditingNodeId] = useState(null);\n  const [editingText, setEditingText] = useState('');\n  const [linkCreation, setLinkCreation] = useState({active: false, sourceId: null});\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [width, setWidth] = useState(800);\n  const [height, setHeight] = useState(600);\n  const [collapsedNodes, setCollapsedNodes] = useState(new Set());\n  const svgRef = useRef();\n  const zoomRef = useRef();\n  const gRef = useRef();\n  const simulationRef = useRef();\n\n  const colors = useMemo(() => ['#dbeafe', '#dcfce7', '#f3e8ff', '#fef3c7', '#f0f9ff'], []); // Pastel colors for levels\n\n  const hierarchyToGraph = useCallback((data, collapsed) => {\n    const nodes = [];\n    const links = [];\n    const nodeMap = new Map();\n\n    // Use tree layout for initial positions to avoid random overlaps\n    const treeLayout = d3.tree().size([height - 100, width - 200]);\n    const root = d3.hierarchy(data);\n    treeLayout(root);\n\n    const traverse = (d, parentId = null, depth = 0) => {\n      const id = nodes.length;\n      const hasChildren = d.children && d.children.length > 0;\n      nodes.push({\n        id,\n        name: d.data.name,\n        type: d.data.type || 'action',\n        x: d.y + width / 2, // Horizontal tree\n        y: d.x + height / 2,\n        depth,\n        fx: d.y + width / 2,\n        fy: d.x + height / 2,\n        hasChildren,\n      });\n      nodeMap.set(d.data.name, id);\n\n      if (parentId !== null) {\n        links.push({ source: parentId, target: id, label: d.data.label || '' });\n      }\n\n      if (d.children && !collapsed.has(parentId)) {\n        d.children.forEach(child => traverse(child, id, depth + 1));\n      }\n    };\n\n    traverse(root);\n    return { nodes, links };\n  }, [width, height]);\n\n  useEffect(() => {\n    const handleResize = () => {\n      setWidth(window.innerWidth - 40);\n      setHeight(window.innerHeight - 200);\n    };\n    handleResize();\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  const handleFileUpload = async (event) => {\n    const file = event.target.files[0];\n    if (!file) return;\n\n    if (!file.name.endsWith('.json')) {\n      setError('Please select a JSON file.');\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n\n    try {\n      const text = await file.text();\n      const jsonData = JSON.parse(text);\n\n      const response = await fetch('http://localhost:3001/upload', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(jsonData),\n      });\n\n      if (response.ok) {\n        setIaData(jsonData);\n        fetchData();\n      } else {\n        setError('Failed to upload JSON.');\n      }\n    } catch (err) {\n      setError('Invalid JSON file.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (iaData) {\n      setGraphData(hierarchyToGraph(iaData, collapsedNodes));\n    }\n  }, [iaData, hierarchyToGraph, collapsedNodes]);\n\n  const fetchData = async () => {\n    try {\n      const response = await fetch('http://localhost:3001/ia');\n      if (response.ok) {\n        const data = await response.json();\n        setIaData(data);\n        setError('');\n      } else {\n        setIaData(null);\n        setError('No IA data uploaded yet.');\n      }\n    } catch (err) {\n      setError('Failed to fetch data.');\n    }\n  };\n\n\n  const zoomIn = useCallback(() => {\n    if (zoomRef.current) {\n      const currentTransform = d3.zoomTransform(svgRef.current);\n      zoomRef.current.transform(svgRef.current, currentTransform.scaleBy(1.2));\n    }\n  }, []);\n\n  const zoomOut = useCallback(() => {\n    if (zoomRef.current) {\n      const currentTransform = d3.zoomTransform(svgRef.current);\n      zoomRef.current.transform(svgRef.current, currentTransform.scaleBy(0.8));\n    }\n  }, []);\n\n  const fitToScreen = useCallback(() => {\n    if (gRef.current && svgRef.current) {\n      const bounds = gRef.current.getBBox();\n      const fullWidth = width;\n      const fullHeight = height;\n      const midX = (bounds.x + bounds.width / 2);\n      const midY = (bounds.y + bounds.height / 2);\n      const scale = 0.85;\n      const translate = [fullWidth / 2 - scale * midX, fullHeight / 2 - scale * midY];\n      zoomRef.current.transform(svgRef.current, d3.zoomIdentity.translate(translate[0], translate[1]).scale(scale));\n    }\n  }, [width, height]);\n\n  const resetView = useCallback(() => {\n    if (zoomRef.current) {\n      zoomRef.current.transform(svgRef.current, d3.zoomIdentity);\n    }\n  }, []);\n\n  const toggleCollapse = useCallback((nodeId) => {\n    setCollapsedNodes(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(nodeId)) {\n        newSet.delete(nodeId);\n      } else {\n        newSet.add(nodeId);\n      }\n      return newSet;\n    });\n  }, []);\n\n  const addNode = useCallback(() => {\n    const newId = graphData.nodes.length;\n    const newNode = {\n      id: newId,\n      name: `New Node ${newId}`,\n      x: width / 2 + Math.random() * 100 - 50,\n      y: height / 2 + Math.random() * 100 - 50,\n      depth: 0,\n      fx: null,\n      fy: null,\n    };\n    const newLinks = [...graphData.links];\n    if (selectedNodeId !== null) {\n      newLinks.push({ source: selectedNodeId, target: newId });\n    }\n    setGraphData({ nodes: [...graphData.nodes, newNode], links: newLinks });\n  }, [graphData, selectedNodeId, width, height]);\n\n  const deleteNode = useCallback(() => {\n    if (selectedNodeId === null) return;\n    const newNodes = graphData.nodes.filter(n => n.id !== selectedNodeId);\n    const newLinks = graphData.links.filter(l => l.source.id !== selectedNodeId && l.target.id !== selectedNodeId);\n    setGraphData({ nodes: newNodes, links: newLinks });\n    setSelectedNodeId(null);\n  }, [graphData, selectedNodeId]);\n\n  const startEditing = useCallback((d) => {\n    setEditingNodeId(d.id);\n    setEditingText(d.name);\n  }, []);\n\n  const saveEditing = useCallback(() => {\n    if (editingNodeId !== null) {\n      setGraphData(prev => ({\n        ...prev,\n        nodes: prev.nodes.map(n => n.id === editingNodeId ? { ...n, name: editingText } : n)\n      }));\n      setEditingNodeId(null);\n      setEditingText('');\n    }\n  }, [editingNodeId, editingText]);\n\n  const cancelEditing = useCallback(() => {\n    setEditingNodeId(null);\n    setEditingText('');\n  }, []);\n\n  const startLinkCreation = useCallback((sourceId) => {\n    setLinkCreation({ active: true, sourceId });\n  }, []);\n\n  const updateDragLine = useCallback((event) => {\n    if (!linkCreation.active) return;\n    const [x, y] = d3.pointer(event, svgRef.current);\n    const sourceNode = graphData.nodes.find(n => n.id === linkCreation.sourceId);\n    if (sourceNode && gRef.current) {\n      const path = d3.select(gRef.current).select('.drag-line');\n      path.attr('d', `M${sourceNode.x},${sourceNode.y}L${x},${y}`);\n    }\n  }, [linkCreation, graphData]);\n\n  const endLinkCreation = useCallback((event) => {\n    if (!linkCreation.active) return;\n    const [x, y] = d3.pointer(event, svgRef.current);\n    const targetNode = graphData.nodes.find(n => {\n      const dx = x - (n.x || width / 2);\n      const dy = y - (n.y || height / 2);\n      return Math.sqrt(dx * dx + dy * dy) < 60; // Within 60px radius\n    });\n    if (targetNode && targetNode.id !== linkCreation.sourceId) {\n      setGraphData(prev => ({\n        ...prev,\n        links: [...prev.links, { source: linkCreation.sourceId, target: targetNode.id }]\n      }));\n    }\n    setLinkCreation({ active: false, sourceId: null });\n    if (gRef.current) {\n      d3.select(gRef.current).select('.drag-line').attr('d', 'M0,0L0,0');\n    }\n  }, [linkCreation, graphData, width, height]);\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  useEffect(() => {\n    if (!graphData.nodes.length || error) return;\n\n    const svg = d3.select(svgRef.current);\n    svg.selectAll('*').remove();\n\n    // Add zoom and pan with smooth transitions\n    zoomRef.current = d3.zoom()\n      .scaleExtent([0.1, 4])\n      .on('zoom', (event) => {\n        if (gRef.current) gRef.current.attr('transform', event.transform);\n      });\n\n    svg.call(zoomRef.current);\n\n    const g = svg.append('g')\n      .attr('ref', gRef);\n\n    // Enhanced defs for arrow markers, shadow, and glow\n    const defs = svg.append('defs');\n\n    // Arrowhead\n    defs.append('marker')\n      .attr('id', 'arrowhead')\n      .attr('viewBox', '-0 -5 10 10')\n      .attr('refX', 15)\n      .attr('refY', 0)\n      .attr('orient', 'auto')\n      .attr('markerWidth', 8)\n      .attr('markerHeight', 8)\n      .attr('xoverflow', 'visible')\n      .append('path')\n      .attr('d', 'M 0,-5 L 10 ,0 L 0,5')\n      .attr('fill', '#6b7280')\n      .attr('stroke', 'none');\n\n    // Soft shadow\n    const shadowFilter = defs.append('filter')\n      .attr('id', 'shadow')\n      .attr('x', '-50%')\n      .attr('y', '-50%')\n      .attr('width', '200%')\n      .attr('height', '200%');\n\n    shadowFilter.append('feDropShadow')\n      .attr('dx', 1)\n      .attr('dy', 1)\n      .attr('stdDeviation', 3)\n      .attr('flood-color', 'rgba(0,0,0,0.2)');\n\n    // Glow for hover\n    const glowFilter = defs.append('filter')\n      .attr('id', 'glow')\n      .attr('x', '-50%')\n      .attr('y', '-50%')\n      .attr('width', '200%')\n      .attr('height', '200%');\n\n    glowFilter.append('feGaussianBlur')\n      .attr('stdDeviation', 3)\n      .attr('result', 'coloredBlur');\n\n    const feMerge = glowFilter.append('feMerge');\n    feMerge.append('feMergeNode').attr('in', 'coloredBlur');\n    feMerge.append('feMergeNode').attr('in', 'SourceGraphic');\n\n    // Drag line for edge creation\n    g.append('path')\n      .attr('class', 'drag-line')\n      .attr('stroke', '#999')\n      .attr('stroke-width', 2)\n      .attr('fill', 'none')\n      .attr('d', 'M0,0L0,0')\n      .style('pointer-events', 'none');\n\n    // Smooth curved links\n    const link = g.selectAll('.link')\n      .data(graphData.links)\n      .enter().append('path')\n      .attr('class', 'link')\n      .attr('fill', 'none')\n      .attr('marker-end', 'url(#arrowhead)')\n      .attr('stroke', '#9ca3af')\n      .attr('stroke-width', 2)\n      .style('transition', 'stroke 0.3s ease, stroke-width 0.3s ease');\n\n    // Link labels\n    const linkLabel = g.selectAll('.link-label')\n      .data(graphData.links)\n      .enter().append('text')\n      .attr('class', 'link-label')\n      .attr('font-size', 10)\n      .attr('fill', '#6b7280')\n      .attr('text-anchor', 'middle')\n      .attr('dominant-baseline', 'middle')\n      .style('pointer-events', 'none')\n      .text(d => d.label || '');\n\n    // Nodes with animations, hover glow\n    const node = g.selectAll('.node')\n      .data(graphData.nodes)\n      .enter().append('g')\n      .classed('node', true)\n      .attr('opacity', 0)\n      .style('transition', 'opacity 0.5s ease')\n      .call(d3.drag()\n        .on('start', dragstarted)\n        .on('drag', dragged)\n        .on('end', dragended)\n      )\n      .on('click', (event, d) => {\n        if (editingNodeId !== null) {\n          saveEditing();\n        }\n        if (d.hasChildren) {\n          toggleCollapse(d.id);\n        } else {\n          setSelectedNodeId(d.id);\n        }\n      })\n      .on('dblclick', (event, d) => {\n        event.stopPropagation();\n        startEditing(d);\n      })\n      .on('mouseover', function(event, d) {\n        d3.select(this).select('rect')\n          .attr('filter', 'url(#glow)')\n          .attr('stroke', '#3b82f6')\n          .attr('stroke-width', 4);\n        // Highlight connected links (incoming and outgoing)\n        g.selectAll('.link').filter(l => l.source.id === d.id || l.target.id === d.id)\n          .attr('stroke', '#3b82f6').attr('stroke-width', 3);\n      })\n      .on('mouseout', function(event, d) {\n        d3.select(this).select('rect')\n          .attr('filter', 'url(#shadow)')\n          .attr('stroke', selectedNodeId === d.id ? '#3b82f6' : colors[d.depth % colors.length])\n          .attr('stroke-width', selectedNodeId === d.id ? 3 : 2);\n        g.selectAll('.link').attr('stroke', '#9ca3af').attr('stroke-width', 2);\n      });\n\n    // Animate nodes in with fade and scale up\n    node\n      .attr('opacity', 0)\n      .attr('transform', d => `translate(${(d.x || width / 2)}, ${(d.y || height / 2)}) scale(0.5)`)\n      .transition()\n      .duration(500)\n      .attr('opacity', 1)\n      .attr('transform', d => `translate(${(d.x || width / 2)}, ${(d.y || height / 2)}) scale(1)`);\n\n    node.append('rect')\n      .attr('width', 140)\n      .attr('height', 50)\n      .attr('x', -70)\n      .attr('y', -25)\n      .attr('rx', 10)\n      .attr('ry', 10)\n      .attr('fill', '#ffffff')\n      .attr('stroke', d => selectedNodeId === d.id ? '#3b82f6' : colors[d.depth % colors.length])\n      .attr('stroke-width', d => selectedNodeId === d.id ? 3 : 2)\n      .attr('filter', 'url(#shadow)');\n\n    node.each(function(d) {\n      const group = d3.select(this);\n      if (d.id === editingNodeId) {\n        const foreignObject = group.append('foreignObject')\n          .attr('x', -60)\n          .attr('y', -10)\n          .attr('width', 120)\n          .attr('height', 20);\n\n        foreignObject.append('xhtml:input')\n          .attr('type', 'text')\n          .attr('value', editingText)\n          .style('width', '100%')\n          .style('height', '100%')\n          .style('border', 'none')\n          .style('outline', 'none')\n          .style('font-size', '12px')\n          .style('font-weight', 'bold')\n          .style('text-align', 'center')\n          .on('input', function(event) {\n            setEditingText(event.target.value);\n          })\n          .on('keydown', function(event) {\n            if (event.key === 'Enter') {\n              saveEditing();\n            } else if (event.key === 'Escape') {\n              cancelEditing();\n            }\n          })\n          .on('blur', saveEditing);\n      } else {\n        group.append('text')\n          .attr('text-anchor', 'middle')\n          .attr('x', 0)\n          .attr('y', 0)\n          .attr('dy', '.35em')\n          .attr('font-size', '12px')\n          .attr('font-weight', 'bold')\n          .attr('fill', '#1f2937')\n          .text(d => d.name)\n          .style('pointer-events', 'none');\n      }\n    });\n\n    // Force simulation\n    simulationRef.current = d3.forceSimulation(graphData.nodes)\n      .force('link', d3.forceLink(graphData.links).id(d => d.id).distance(150).strength(0.5))\n      .force('charge', d3.forceManyBody().strength(-200))\n      .force('x', d3.forceX(width / 2).strength(0.1))\n      .force('y', d3.forceY(height / 2).strength(0.1))\n      .force('collide', d3.forceCollide(80))\n      .on('tick', ticked);\n\n    function ticked() {\n      link.attr('d', linkArc);\n      node.attr('transform', d => `translate(${d.x || width / 2},${d.y || height / 2})`);\n    }\n\n    function linkArc(d) {\n      const source = d.source;\n      const target = d.target;\n      const dx = target.x - source.x;\n      const dy = target.y - source.y;\n      const dr = Math.hypot(dx, dy);\n      return dr > 0 ? `M${source.x},${source.y}A${dr / 2},${dr / 2} 0 0,1 ${target.x},${target.y}` : '';\n    }\n\n    function dragstarted(event, d) {\n      if (!event.active) simulationRef.current.alphaTarget(0.3).restart();\n      d.fx = d.x;\n      d.fy = d.y;\n    }\n\n    function dragged(event, d) {\n      d.fx = snapToGrid ? Math.round(event.x / 20) * 20 : event.x;\n      d.fy = snapToGrid ? Math.round(event.y / 20) * 20 : event.y;\n      simulationRef.current.alpha(0.3);\n    }\n\n    function dragended(event, d) {\n      if (!event.active) simulationRef.current.alphaTarget(0);\n      // Keep fixed after drag for now\n    }\n  }, [graphData, error, width, height, colors, snapToGrid, selectedNodeId]);\n\n  useEffect(() => {\n    const handleKeyDown = (event) => {\n      if (event.target.tagName === 'INPUT' || event.target.tagName === 'TEXTAREA' || event.target.isContentEditable) {\n        return; // Don't interfere with input fields\n      }\n\n      switch (event.key) {\n        case '+':\n        case '=':\n          event.preventDefault();\n          zoomIn();\n          break;\n        case '-':\n          event.preventDefault();\n          zoomOut();\n          break;\n        case 'f':\n        case 'F':\n          event.preventDefault();\n          fitToScreen();\n          break;\n        case 'r':\n        case 'R':\n        case '0':\n          event.preventDefault();\n          resetView();\n          break;\n        default:\n          break;\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [zoomIn, zoomOut, fitToScreen, resetView]);\n\n  return (\n    <div className=\"flex flex-col h-screen bg-gradient-to-br from-blue-50 to-indigo-100\">\n      <div className=\"p-4 bg-white shadow-sm border-b flex justify-between items-center\">\n        <h1 className=\"text-2xl font-bold text-gray-800\">IA Flowchart Diagram</h1>\n        <div className=\"flex items-center space-x-2\">\n          <input\n            type=\"file\"\n            accept=\".json\"\n            onChange={handleFileUpload}\n            disabled={loading}\n            className=\"file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100\"\n          />\n          <button \n            onClick={fetchData} \n            disabled={loading} \n            className=\"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50\"\n          >\n            Refresh\n          </button>\n        </div>\n      </div>\n      {loading && <p className=\"p-2 text-blue-500 text-center\">Uploading...</p>}\n      {error && <p className=\"p-2 text-red-500 text-center\">{error}</p>}\n      <div className=\"flex-1 relative\">\n        <svg ref={svgRef} width={width} height={height} className=\"absolute inset-0 w-full h-full bg-white\">\n          <g ref={gRef}></g>\n        </svg>\n        {/* Floating Toolbar */}\n        <div className=\"absolute top-4 right-4 bg-white shadow-lg rounded-lg p-2 border flex flex-col space-y-1 z-10\">\n          <button onClick={zoomIn} className=\"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded text-gray-700\">+</button>\n          <button onClick={zoomOut} className=\"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded text-gray-700\">-</button>\n          <button onClick={fitToScreen} className=\"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded text-gray-700\">Fit</button>\n          <button onClick={resetView} className=\"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded text-gray-700\">Reset</button>\n          <button onClick={addNode} className=\"px-3 py-1 text-sm bg-blue-100 hover:bg-blue-200 rounded text-blue-700\">Add</button>\n          <button onClick={deleteNode} disabled={selectedNodeId === null} className=\"px-3 py-1 text-sm bg-red-100 hover:bg-red-200 rounded text-red-700 disabled:opacity-50\">Del</button>\n          <button onClick={() => setSnapToGrid(!snapToGrid)} className={`px-3 py-1 text-sm rounded text-gray-700 ${snapToGrid ? 'bg-green-100' : 'bg-gray-100 hover:bg-gray-200'}`}>Grid</button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}