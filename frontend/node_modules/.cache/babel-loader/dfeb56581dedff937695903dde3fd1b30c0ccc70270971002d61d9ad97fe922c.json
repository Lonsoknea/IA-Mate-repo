{"ast":null,"code":"var _jsxFileName = \"D:\\\\vibe coding\\\\ai_project_finial\\\\IA-Mate-repo\\\\frontend\\\\src\\\\IAFlowchart.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback, useMemo } from 'react';\nimport * as d3 from 'd3';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction IAFlowchart() {\n  _s();\n  const navigate = useNavigate();\n  const [iaData, setIaData] = useState(null);\n  const [graphData, setGraphData] = useState({\n    nodes: [],\n    links: []\n  });\n  const [snapToGrid, setSnapToGrid] = useState(false);\n  const [editingNodeId, setEditingNodeId] = useState(null);\n  const [editingText, setEditingText] = useState('');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [width, setWidth] = useState(800);\n  const [height, setHeight] = useState(600);\n  const [selectedNodeName, setSelectedNodeName] = useState(null);\n  const [inputText, setInputText] = useState('');\n  const [aiPrompt, setAiPrompt] = useState('');\n  // Store conversation history as array of { sender: 'user' | 'ai', message: string }\n  const [conversation, setConversation] = useState([]);\n  const [aiLoading, setAiLoading] = useState(false);\n  const [showHistory, setShowHistory] = useState(false);\n  // Removed aiResponse and setAiResponse state\n  const [legendPosition, setLegendPosition] = useState({\n    x: 80,\n    y: 200\n  });\n  const [isDraggingLegend, setIsDraggingLegend] = useState(false);\n  const [dragOffset, setDragOffset] = useState({\n    x: 0,\n    y: 0\n  });\n  const svgRef = useRef();\n  const zoomRef = useRef();\n  const gRef = useRef();\n  const conversationEndRef = useRef(null);\n  useEffect(() => {\n    if (conversationEndRef.current) {\n      conversationEndRef.current.scrollTop = conversationEndRef.current.scrollHeight;\n    }\n  }, [conversation]);\n  useEffect(() => {\n    // Load conversations from DB on mount\n    fetch('http://localhost:3003/conversations').then(res => res.json()).then(data => setConversation(data.messages || [])).catch(err => console.error('Failed to load conversations', err));\n  }, []);\n  const templates = useMemo(() => ({\n    'e-commerce': {\n      name: 'E-commerce Site',\n      type: 'page',\n      children: [{\n        name: 'Home',\n        type: 'page'\n      }, {\n        name: 'Browse Products',\n        type: 'action',\n        children: [{\n          name: 'Product Details',\n          type: 'page'\n        }]\n      }, {\n        name: 'Shopping Cart',\n        type: 'page'\n      }, {\n        name: 'Checkout',\n        type: 'action',\n        label: 'Proceed to payment'\n      }, {\n        name: 'Login Required?',\n        type: 'decision',\n        children: [{\n          name: 'Login',\n          type: 'action',\n          label: 'User authentication'\n        }, {\n          name: 'Guest Checkout',\n          type: 'page',\n          linkType: 'related',\n          label: 'Alternative path'\n        }]\n      }, {\n        name: 'Payment Method',\n        type: 'decision',\n        children: [{\n          name: 'Credit Card',\n          type: 'page',\n          label: 'Choose Card'\n        }, {\n          name: 'PayPal',\n          type: 'action',\n          label: 'Redirect to PayPal'\n        }]\n      }, {\n        name: 'Order Confirmation',\n        type: 'page'\n      }, {\n        name: 'User Profile',\n        type: 'page',\n        linkType: 'related'\n      }]\n    },\n    'portfolio': {\n      name: 'Portfolio Site',\n      type: 'page',\n      children: [{\n        name: 'Home',\n        type: 'page'\n      }, {\n        name: 'About Me',\n        type: 'page'\n      }, {\n        name: 'Projects',\n        type: 'page',\n        children: [{\n          name: 'Project 1',\n          type: 'page'\n        }, {\n          name: 'Project 2',\n          type: 'page'\n        }]\n      }, {\n        name: 'Contact',\n        type: 'page'\n      }, {\n        name: 'Blog',\n        type: 'page',\n        linkType: 'related'\n      }]\n    },\n    'blog': {\n      name: 'Blog Site',\n      type: 'page',\n      children: [{\n        name: 'Home',\n        type: 'page'\n      }, {\n        name: 'Posts List',\n        type: 'page',\n        children: [{\n          name: 'Single Post',\n          type: 'page'\n        }]\n      }, {\n        name: 'Categories',\n        type: 'decision',\n        children: [{\n          name: 'Technology',\n          type: 'page'\n        }, {\n          name: 'Design',\n          type: 'page'\n        }, {\n          name: 'Lifestyle',\n          type: 'page'\n        }]\n      }, {\n        name: 'About',\n        type: 'page'\n      }, {\n        name: 'Comments Section',\n        type: 'action',\n        linkType: 'related'\n      }]\n    },\n    'restaurant': {\n      name: 'Restaurant Site',\n      type: 'page',\n      children: [{\n        name: 'Home',\n        type: 'page'\n      }, {\n        name: 'Menu',\n        type: 'page'\n      }, {\n        name: 'Browse Dishes',\n        type: 'action',\n        children: [{\n          name: 'Dish Details',\n          type: 'page'\n        }]\n      }, {\n        name: 'Order Online',\n        type: 'decision',\n        children: [{\n          name: 'Dine In',\n          type: 'page',\n          label: 'Reserve table'\n        }, {\n          name: 'Takeaway',\n          type: 'action',\n          label: 'Quick order'\n        }]\n      }, {\n        name: 'Reservations',\n        type: 'page'\n      }, {\n        name: 'Contact',\n        type: 'page',\n        linkType: 'related'\n      }, {\n        name: 'Reviews',\n        type: 'page'\n      }]\n    },\n    'university': {\n      name: 'University Site',\n      type: 'page',\n      children: [{\n        name: 'Home',\n        type: 'page'\n      }, {\n        name: 'Admissions',\n        type: 'decision',\n        children: [{\n          name: 'Apply Online',\n          type: 'action'\n        }, {\n          name: 'Visit Campus',\n          type: 'page',\n          linkType: 'related'\n        }]\n      }, {\n        name: 'Courses',\n        type: 'page'\n      }, {\n        name: 'Enroll',\n        type: 'action',\n        children: [{\n          name: 'Course Details',\n          type: 'page'\n        }]\n      }, {\n        name: 'Library',\n        type: 'page'\n      }, {\n        name: 'Resources',\n        type: 'page',\n        linkType: 'related'\n      }, {\n        name: 'Contact',\n        type: 'page'\n      }]\n    },\n    'banking app': {\n      name: 'Banking App',\n      type: 'page',\n      children: [{\n        name: 'Login',\n        type: 'action'\n      }, {\n        name: 'Dashboard',\n        type: 'page'\n      }, {\n        name: 'Transfer Funds',\n        type: 'decision',\n        children: [{\n          name: 'Internal Transfer',\n          type: 'action'\n        }, {\n          name: 'External Transfer',\n          type: 'page',\n          label: 'To other banks'\n        }]\n      }, {\n        name: 'Account Details',\n        type: 'page'\n      }, {\n        name: 'Support',\n        type: 'page',\n        linkType: 'related'\n      }, {\n        name: 'Transactions',\n        type: 'page'\n      }]\n    }\n  }), []);\n  const genericTemplate = useMemo(() => ({\n    name: 'Generic Site',\n    type: 'page',\n    children: [{\n      name: 'Home',\n      type: 'page'\n    }, {\n      name: 'Services',\n      type: 'page'\n    }, {\n      name: 'Service Selection',\n      type: 'decision',\n      children: [{\n        name: 'Basic Service',\n        type: 'action'\n      }, {\n        name: 'Premium Service',\n        type: 'page'\n      }]\n    }, {\n      name: 'Blog',\n      type: 'page',\n      linkType: 'related'\n    }, {\n      name: 'Login',\n      type: 'action'\n    }, {\n      name: 'Contact',\n      type: 'page'\n    }, {\n      name: 'Checkout',\n      type: 'decision',\n      children: [{\n        name: 'Payment Methods',\n        type: 'page'\n      }, {\n        name: 'Order Review',\n        type: 'action'\n      }]\n    }, {\n      name: 'Payment',\n      type: 'page'\n    }]\n  }), []);\n  const colors = useMemo(() => ['#f8fafc', '#e2e8f0', '#cbd5e1', '#94a3b8', '#64748b'], []);\n  const hierarchyToGraph = useCallback(data => {\n    const nodes = [];\n    const links = [];\n\n    // Use tree layout for initial positions to avoid random overlaps\n    const treeLayout = d3.tree().size([height - 100, width - 200]);\n    const root = d3.hierarchy(data);\n    treeLayout(root);\n    const traverse = (d, parentId = null, depth = 0) => {\n      const id = nodes.length;\n      const hasChildren = d.children && d.children.length > 0;\n      nodes.push({\n        id,\n        name: d.data.name,\n        type: d.data.type || 'action',\n        x: d.y + width / 2,\n        // Horizontal tree\n        y: d.x + height / 2,\n        depth,\n        fx: d.y + width / 2,\n        fy: d.x + height / 2,\n        hasChildren\n      });\n      if (parentId !== null) {\n        links.push({\n          source: nodes[parentId],\n          target: nodes[id],\n          label: d.data.label || '',\n          type: d.data.linkType || 'direct'\n        });\n      }\n      if (d.children) {\n        d.children.forEach(child => traverse(child, id, depth + 1));\n      }\n    };\n    traverse(root);\n    return {\n      nodes,\n      links\n    };\n  }, [width, height]);\n\n  // Define recursive functions using useCallback to avoid parsing issues\n  const addChildToNode = useCallback((root, parentName, newChild) => {\n    if (root.name === parentName) {\n      root.children = root.children || [];\n      root.children.push(newChild);\n      return root;\n    }\n    if (root.children) {\n      for (let i = 0; i < root.children.length; i++) {\n        const updated = addChildToNode(root.children[i], parentName, newChild);\n        if (updated) {\n          root.children[i] = updated;\n          return root;\n        }\n      }\n    }\n    return null;\n  }, []);\n  const removeNodeByName = useCallback((root, targetName) => {\n    if (root.name === targetName) {\n      return null; // Remove this node\n    }\n    if (root.children) {\n      root.children = root.children.map(child => removeNodeByName(child, targetName)).filter(Boolean);\n      return root;\n    }\n    return root;\n  }, []);\n  useEffect(() => {\n    const handleResize = () => {\n      setWidth(window.innerWidth - 40);\n      setHeight(window.innerHeight - 200);\n    };\n    handleResize();\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Removed JSON upload feature, replaced with Referent feature placeholder\n  // const handleFileUpload = async (event) => {\n  //   const file = event.target.files[0];\n  //   if (!file) return;\n\n  //   if (!file.name.endsWith('.json')) {\n  //     setError('Please select a JSON file.');\n  //     return;\n  //   }\n\n  //   setLoading(true);\n  //   setError('');\n\n  //   try {\n  //     const text = await file.text();\n  //     const jsonData = JSON.parse(text);\n  //     setIaData(jsonData);\n  //     setError('');\n  //   } catch (err) {\n  //     setError('Invalid JSON file.');\n  //   } finally {\n  //     setLoading(false);\n  //   }\n  // };\n\n  useEffect(() => {\n    if (iaData) {\n      setGraphData(hierarchyToGraph(iaData));\n    }\n  }, [iaData, hierarchyToGraph]);\n  const fetchData = async () => {\n    try {\n      const response = await fetch('http://localhost:3003/ia');\n      if (response.ok) {\n        const data = await response.json();\n        setIaData(data);\n        setError('');\n      } else {\n        setIaData(null);\n        setError('');\n      }\n    } catch (err) {\n      setError('Failed to fetch data.');\n    }\n  };\n  const zoomIn = useCallback(() => {\n    if (zoomRef.current) {\n      zoomRef.current.scaleBy(d3.select(svgRef.current), 1.2);\n    }\n  }, []);\n  const zoomOut = useCallback(() => {\n    if (zoomRef.current) {\n      zoomRef.current.scaleBy(d3.select(svgRef.current), 0.8);\n    }\n  }, []);\n  const fitToScreen = useCallback(() => {\n    if (gRef.current && svgRef.current) {\n      const bounds = gRef.current.getBBox();\n      const fullWidth = width;\n      const fullHeight = height;\n      const midX = bounds.x + bounds.width / 2;\n      const midY = bounds.y + bounds.height / 2;\n      const scale = 0.85;\n      const translate = [fullWidth / 2 - scale * midX, fullHeight / 2 - scale * midY];\n      zoomRef.current.transform(d3.select(svgRef.current), d3.zoomIdentity.translate(translate[0], translate[1]).scale(scale));\n    }\n  }, [width, height]);\n  const resetView = useCallback(() => {\n    if (zoomRef.current) {\n      zoomRef.current.transform(d3.select(svgRef.current), d3.zoomIdentity);\n    }\n  }, []);\n  const addNode = useCallback(() => {\n    if (!selectedNodeName || !iaData) return;\n    const newChild = {\n      name: `New Node ${Date.now()}`,\n      type: 'action',\n      children: []\n    };\n    const newIaData = JSON.parse(JSON.stringify(iaData)); // Deep copy\n    addChildToNode(newIaData, selectedNodeName, newChild);\n    setIaData(newIaData);\n    setSelectedNodeName(null);\n  }, [iaData, selectedNodeName, addChildToNode]);\n  const deleteNode = useCallback(() => {\n    if (!selectedNodeName || !iaData) return;\n    const newIaData = JSON.parse(JSON.stringify(iaData)); // Deep copy\n    const updatedRoot = removeNodeByName(newIaData, selectedNodeName);\n    if (updatedRoot) {\n      setIaData(updatedRoot);\n    } else {\n      setIaData(null);\n    }\n    setSelectedNodeName(null);\n  }, [iaData, selectedNodeName, removeNodeByName]);\n  const startEditing = useCallback(d => {\n    setEditingNodeId(d.id);\n    setEditingText(d.name);\n  }, []);\n  const saveEditing = useCallback(() => {\n    if (editingNodeId !== null) {\n      setGraphData(prev => ({\n        ...prev,\n        nodes: prev.nodes.map(n => n.id === editingNodeId ? {\n          ...n,\n          name: editingText\n        } : n)\n      }));\n      setEditingNodeId(null);\n      setEditingText('');\n    }\n  }, [editingNodeId, editingText]);\n  const cancelEditing = useCallback(() => {\n    setEditingNodeId(null);\n    setEditingText('');\n  }, []);\n  const getNodePath = useCallback(d => {\n    const w = 80; // half width 160\n    const h = 30; // half height 60\n    const rx = 8;\n    const ry = 8;\n    switch (d.type) {\n      case 'action':\n        // Oval (ellipse)\n        return `M ${-w} 0 A ${w} ${h} 0 1 1 ${w} 0 A ${w} ${h} 0 1 1 ${-w} 0 Z`;\n      case 'decision':\n        // Diamond\n        return `M 0 ${-h} L ${w} 0 L 0 ${h} L ${-w} 0 Z`;\n      case 'page':\n      default:\n        // Rounded rectangle\n        return `M ${-w + rx} ${-h} h ${w - 2 * rx} a ${rx} ${ry} 0 0 1 ${rx} ${ry} v ${h - 2 * ry} a ${rx} ${ry} 0 0 1 -${rx} ${ry} h ${-(w - 2 * rx)} a ${rx} ${ry} 0 0 1 -${rx} -${ry} v ${-(h - 2 * ry)} a ${rx} ${ry} 0 0 1 ${rx} -${ry} z`;\n    }\n  }, []);\n  const generateIA = useCallback(() => {\n    const keyword = inputText.trim().toLowerCase();\n    if (!keyword) {\n      setError('Please enter a keyword');\n      return;\n    }\n    setLoading(true);\n    setError('');\n    try {\n      let generated;\n      if (templates[keyword]) {\n        generated = templates[keyword];\n      } else {\n        generated = genericTemplate;\n        setError('Keyword not recognized. Using generic template. Try \"e-commerce\", \"portfolio\", or \"blog\".');\n      }\n      setIaData(generated);\n      // Auto-fit after generation\n      setTimeout(() => fitToScreen(), 100);\n    } catch (err) {\n      setError('Failed to generate IA.');\n      setIaData(genericTemplate);\n      setTimeout(() => fitToScreen(), 100);\n    } finally {\n      setLoading(false);\n    }\n  }, [inputText, templates, genericTemplate, fitToScreen]);\n  useEffect(() => {\n    fetchData();\n  }, []);\n  useEffect(() => {\n    if (!graphData.nodes.length || error) return;\n    const svg = d3.select(svgRef.current);\n    svg.selectAll('*').remove();\n    const g = svg.append('g');\n    gRef.current = g.node();\n\n    // Add zoom and pan with smooth transitions\n    zoomRef.current = d3.zoom().scaleExtent([0.1, 4]).on('zoom', event => {\n      if (gRef.current) d3.select(gRef.current).attr('transform', event.transform);\n    });\n    svg.call(zoomRef.current);\n\n    // Enhanced defs for arrow markers, shadow, and glow\n    const defs = svg.append('defs');\n\n    // Arrowhead\n    defs.append('marker').attr('id', 'arrowhead').attr('viewBox', '-0 -5 10 10').attr('refX', 15).attr('refY', 0).attr('orient', 'auto').attr('markerWidth', 8).attr('markerHeight', 8).attr('xoverflow', 'visible').append('path').attr('d', 'M 0,-5 L 10 ,0 L 0,5').attr('fill', '#6b7280').attr('stroke', 'none');\n\n    // Soft shadow\n    const shadowFilter = defs.append('filter').attr('id', 'shadow').attr('x', '-50%').attr('y', '-50%').attr('width', '200%').attr('height', '200%');\n    shadowFilter.append('feDropShadow').attr('dx', 1).attr('dy', 1).attr('stdDeviation', 3).attr('flood-color', 'rgba(0,0,0,0.2)');\n\n    // Glow for hover\n    const glowFilter = defs.append('filter').attr('id', 'glow').attr('x', '-50%').attr('y', '-50%').attr('width', '200%').attr('height', '200%');\n    glowFilter.append('feGaussianBlur').attr('in', 'SourceAlpha').attr('stdDeviation', 3).attr('result', 'blur');\n    glowFilter.append('feOffset').attr('in', 'blur').attr('dx', 0).attr('dy', 0).attr('result', 'offsetBlur');\n    glowFilter.append('feFlood').attr('flood-color', '#3b82f6').attr('flood-opacity', '0.8').attr('result', 'glowColor');\n    glowFilter.append('feComposite').attr('in', 'glowColor').attr('in2', 'offsetBlur').attr('operator', 'in').attr('result', 'glowShape');\n    const feMerge = glowFilter.append('feMerge');\n    feMerge.append('feMergeNode').attr('in', 'glowShape');\n    feMerge.append('feMergeNode').attr('in', 'SourceGraphic');\n\n    // Curved links for smoother appearance\n    const link = g.selectAll('.link').data(graphData.links).enter().append('path').attr('class', 'link').attr('fill', 'none').attr('marker-end', 'url(#arrowhead)').attr('stroke', '#9ca3af').attr('stroke-width', 2.5).attr('stroke-dasharray', d => d.type === 'related' ? '5,5' : 'none').attr('d', linkArc).style('transition', 'stroke 0.3s ease, stroke-width 0.3s ease');\n\n    // Link labels (hidden if empty)\n    const linkLabel = g.selectAll('.link-label').data(graphData.links).enter().append('text').attr('class', 'link-label').attr('font-size', 12).attr('fill', '#6b7280').attr('text-anchor', 'middle').attr('dominant-baseline', 'middle').attr('x', d => (d.source.x + d.target.x) / 2).attr('y', d => Math.min(d.source.y, d.target.y) - 15).style('pointer-events', 'none').text(d => d.label || '').style('display', d => d.label ? 'block' : 'none').style('text-shadow', '1px 1px 2px rgba(255,255,255,0.8)');\n\n    // Nodes with animations, hover glow\n    const node = g.selectAll('.node').data(graphData.nodes).enter().append('g').classed('node', true).attr('opacity', 0).style('transition', 'opacity 0.5s ease').call(d3.drag().on('start', dragstarted).on('drag', dragged).on('end', dragended)).on('click', (event, d) => {\n      if (editingNodeId !== null) {\n        saveEditing();\n      }\n      setSelectedNodeName(d.name);\n    }).on('dblclick', (event, d) => {\n      event.stopPropagation();\n      startEditing(d);\n    }).on('mouseover', function (event, d) {\n      d3.select(this).select('path').attr('filter', 'url(#glow)').attr('stroke', '#3b82f6').attr('stroke-width', 4);\n      // Highlight outgoing links\n      g.selectAll('.link').filter(l => l.source.id === d.id).attr('stroke', '#3b82f6').attr('stroke-width', 3.5);\n    }).on('mouseout', function (event, d) {\n      d3.select(this).select('path').attr('filter', 'url(#shadow)').attr('stroke', selectedNodeName === d.name ? '#3b82f6' : colors[d.depth % colors.length]).attr('stroke-width', selectedNodeName === d.name ? 4 : 2.5);\n      g.selectAll('.link').attr('stroke', '#9ca3af').attr('stroke-width', 2.5);\n    });\n\n    // Set node positions directly from tree layout\n    node.attr('opacity', 0).attr('transform', d => `translate(${d.x}, ${d.y}) scale(0.5)`).transition().duration(500).attr('opacity', 1).attr('transform', d => `translate(${d.x}, ${d.y}) scale(1)`);\n    node.append('path').attr('d', getNodePath).attr('fill', d => {\n      switch (d.type) {\n        case 'page':\n          return '#dbeafe';\n        case 'action':\n          return '#dcfce7';\n        case 'decision':\n          return '#fed7aa';\n        default:\n          return '#f8fafc';\n      }\n    }).attr('stroke', d => selectedNodeName === d.name ? '#3b82f6' : colors[d.depth % colors.length]).attr('stroke-width', d => selectedNodeName === d.name ? 4 : 2.5).attr('filter', 'url(#shadow)');\n    node.each(function (d) {\n      const group = d3.select(this);\n      if (d.id === editingNodeId) {\n        const foreignObject = group.append('foreignObject').attr('x', -80).attr('y', -30).attr('width', 160).attr('height', 60);\n        foreignObject.append('xhtml:input').attr('type', 'text').property('value', editingText).style('width', '100%').style('height', '100%').style('border', 'none').style('outline', 'none').style('font-size', '14px').style('font-family', 'Inter, system-ui, sans-serif').style('font-weight', 'bold').style('text-align', 'center').style('display', 'flex').style('align-items', 'center').style('justify-content', 'center').on('input', function (event) {\n          setEditingText(event.target.value);\n        }).on('keydown', function (event) {\n          if (event.key === 'Enter') {\n            saveEditing();\n          } else if (event.key === 'Escape') {\n            cancelEditing();\n          }\n        }).on('blur', saveEditing);\n      } else {\n        group.append('text').attr('text-anchor', 'middle').attr('x', 0).attr('y', 0).attr('dy', '.35em').attr('font-size', '14px').attr('font-family', 'Inter, system-ui, sans-serif').attr('font-weight', 'bold').attr('fill', '#1f2937').text(d => d.name).style('pointer-events', 'none');\n      }\n    });\n    function linkArc(d) {\n      const source = d.source;\n      const target = d.target;\n      // Curved bezier line for smoother appearance\n      const dx = target.x - source.x;\n      const dy = target.y - source.y;\n      const cp1x = source.x + dx / 3;\n      const cp1y = source.y + dy / 2 - 20;\n      const cp2x = source.x + 2 * dx / 3;\n      const cp2y = target.y - dy / 2 + 20;\n      return `M ${source.x} ${source.y} C ${cp1x} ${cp1y} ${cp2x} ${cp2y} ${target.x} ${target.y}`;\n    }\n    function dragstarted(event, d) {\n      // No simulation, just start drag\n    }\n    function dragged(event, d) {\n      // Constrain both x and y\n      d.x = snapToGrid ? Math.round(event.x / 20) * 20 : event.x;\n      d.y = snapToGrid ? Math.round(event.y / 20) * 20 : event.y;\n      d3.select(this).attr('transform', `translate(${d.x}, ${d.y})`);\n      // Update links\n      link.attr('d', linkArc);\n      linkLabel.attr('x', d => (d.source.x + d.target.x) / 2).attr('y', d => Math.min(d.source.y, d.target.y) - 15);\n    }\n    function dragended(event, d) {\n      // No simulation to stop\n    }\n  }, [graphData, error, width, height, colors, snapToGrid, selectedNodeName, startEditing, saveEditing, cancelEditing, editingNodeId, editingText, getNodePath]);\n  useEffect(() => {\n    const handleKeyDown = event => {\n      if (event.target.tagName === 'INPUT' || event.target.tagName === 'TEXTAREA' || event.target.isContentEditable) {\n        return; // Don't interfere with input fields\n      }\n      switch (event.key) {\n        case '+':\n        case '=':\n          event.preventDefault();\n          zoomIn();\n          break;\n        case '-':\n          event.preventDefault();\n          zoomOut();\n          break;\n        case 'f':\n        case 'F':\n          event.preventDefault();\n          fitToScreen();\n          break;\n        case 'r':\n        case 'R':\n        case '0':\n          event.preventDefault();\n          resetView();\n          break;\n        default:\n          break;\n      }\n    };\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [zoomIn, zoomOut, fitToScreen, resetView]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col h-screen bg-gradient-to-br from-blue-50 to-indigo-100\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 bg-white shadow-sm border-b flex justify-between items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          className: \"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors\",\n          children: \"\\u2190 Home\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 792,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-2xl font-bold text-gray-800\",\n          children: \"IA Flowchart Diagram\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 795,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 791,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col items-end space-y-2\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: inputText,\n            onChange: e => setInputText(e.target.value),\n            disabled: loading,\n            className: \"w-64 px-3 py-2 border border-gray-300 rounded focus:border-blue-500 focus:outline-none text-sm placeholder-gray-500\",\n            placeholder: \"Enter a keyword, e.g., 'e-commerce'\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 799,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: generateIA,\n            disabled: loading,\n            className: \"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:opacity-50\",\n            children: \"Generate\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 807,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => navigate('/referent'),\n            disabled: loading,\n            className: \"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50\",\n            children: \"Referent\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 815,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 798,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 797,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 790,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"p-2 text-blue-500 text-center\",\n      children: \"Uploading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 825,\n      columnNumber: 19\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-3 mb-4 text-sm text-red-700 bg-red-100 rounded border border-red-400 text-center\",\n      role: \"alert\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 826,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 relative\",\n      children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n        ref: svgRef,\n        width: width,\n        height: height,\n        className: \"absolute inset-0 w-full h-full bg-white\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 828,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute top-4 left-4 bg-white shadow-lg rounded-lg p-2 border flex flex-col space-y-1 z-10\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: zoomIn,\n          className: \"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded text-gray-700 shadow-sm\",\n          children: \"+\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 832,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: zoomOut,\n          className: \"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded text-gray-700 shadow-sm\",\n          children: \"-\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 833,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: fitToScreen,\n          className: \"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded text-gray-700 shadow-sm\",\n          children: \"\\u2194\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 834,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: resetView,\n          className: \"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded text-gray-700 shadow-sm\",\n          children: \"\\u27F2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 835,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: addNode,\n          className: \"px-2 py-1 text-xs bg-blue-100 hover:bg-blue-200 rounded text-blue-700 shadow-sm\",\n          children: \"+\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 836,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: deleteNode,\n          disabled: selectedNodeName === null,\n          className: \"px-2 py-1 text-xs bg-red-100 hover:bg-red-200 rounded text-red-700 disabled:opacity-50 shadow-sm\",\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 837,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setSnapToGrid(!snapToGrid),\n          className: `px-2 py-1 text-xs rounded text-gray-700 shadow-sm ${snapToGrid ? 'bg-green-100' : 'bg-gray-100 hover:bg-gray-200'}`,\n          children: \"\\u229E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 838,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 831,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute bg-white/90 shadow-lg rounded-lg p-4 border border-gray-200 z-50 max-w-xs backdrop-blur-sm cursor-move select-none\",\n        style: {\n          left: legendPosition.x,\n          top: legendPosition.y\n        },\n        onMouseDown: e => {\n          setIsDraggingLegend(true);\n          setDragOffset({\n            x: e.clientX - legendPosition.x,\n            y: e.clientY - legendPosition.y\n          });\n        },\n        onMouseUp: () => setIsDraggingLegend(false),\n        onMouseLeave: () => setIsDraggingLegend(false),\n        onMouseMove: e => {\n          if (isDraggingLegend) {\n            setLegendPosition({\n              x: e.clientX - dragOffset.x,\n              y: e.clientY - dragOffset.y\n            });\n          }\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-sm font-semibold text-gray-800 mb-2\",\n          children: \"Legend\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 862,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-1 text-xs text-gray-700\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-lg\",\n              children: \"\\u25A1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 865,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-blue-600\",\n              children: \"Rectangle = Page / Screen\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 866,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 864,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-lg\",\n              children: \"\\u25CB\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 869,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-green-600\",\n              children: \"Oval = Process / Action\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 870,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 868,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-lg\",\n              children: \"\\u25C7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 873,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-orange-600\",\n              children: \"Diamond = Decision\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 874,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 872,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm font-mono\",\n              children: \"\\u2014\\u2014\\u2014\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 877,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Solid line = Direct navigation\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 878,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 876,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm font-mono\",\n              children: \"- - -\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 881,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Dashed line = Related link\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 882,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 880,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 863,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 841,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute top-0 right-0 h-full w-1/4 bg-white shadow-lg border-l border-gray-200 z-10 flex flex-col p-4 backdrop-blur-sm\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold text-gray-800 mb-4\",\n          children: \"AI Box\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 888,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: conversationEndRef,\n          className: \"flex flex-col flex-1 overflow-y-auto mb-4 border border-gray-300 bg-white p-2 space-y-2 rounded-md\",\n          children: conversation.map((entry, index) => {\n            // Function to parse code blocks in message\n            const parseCodeBlocks = text => {\n              const regex = /```(\\w+)?\\n([\\s\\S]*?)```/g;\n              const parts = [];\n              let lastIndex = 0;\n              let match;\n              while ((match = regex.exec(text)) !== null) {\n                if (match.index > lastIndex) {\n                  parts.push({\n                    type: 'text',\n                    content: text.substring(lastIndex, match.index)\n                  });\n                }\n                parts.push({\n                  type: 'code',\n                  lang: match[1] || '',\n                  content: match[2]\n                });\n                lastIndex = regex.lastIndex;\n              }\n              if (lastIndex < text.length) {\n                parts.push({\n                  type: 'text',\n                  content: text.substring(lastIndex)\n                });\n              }\n              return parts;\n            };\n\n            // Render code block UI\n            const CodeBlock = ({\n              lang,\n              content\n            }) => {\n              const copyCode = () => {\n                navigator.clipboard.writeText(content);\n              };\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative bg-gray-900 text-gray-100 rounded-md p-4 font-mono text-sm overflow-auto my-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between items-center mb-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-xs font-semibold\",\n                    children: lang || 'code'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 918,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: copyCode,\n                    className: \"text-gray-400 hover:text-white text-xs flex items-center space-x-1\",\n                    \"aria-label\": \"Copy code\",\n                    title: \"Copy code\",\n                    children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                      xmlns: \"http://www.w3.org/2000/svg\",\n                      fill: \"none\",\n                      viewBox: \"0 0 24 24\",\n                      stroke: \"currentColor\",\n                      strokeWidth: 2,\n                      className: \"w-4 h-4\",\n                      children: [/*#__PURE__*/_jsxDEV(\"rect\", {\n                        x: \"8\",\n                        y: \"8\",\n                        width: \"12\",\n                        height: \"12\",\n                        strokeLinecap: \"round\",\n                        strokeLinejoin: \"round\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 926,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"rect\", {\n                        x: \"4\",\n                        y: \"4\",\n                        width: \"12\",\n                        height: \"12\",\n                        strokeLinecap: \"round\",\n                        strokeLinejoin: \"round\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 927,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 925,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"Copy code\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 929,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 919,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 917,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n                  className: \"whitespace-pre-wrap\",\n                  children: content\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 932,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 916,\n                columnNumber: 19\n              }, this);\n            };\n            if (entry.sender === 'ai') {\n              // Remove ** signs from AI message\n              const cleanedMessage = entry.message.replace(/\\*\\*/g, '');\n              // Replace specific text pattern in AI message\n              const modifiedMessage = cleanedMessage.replace(/Python is a popular and powerful computer programming language\\./g, 'Python is a \" popular and powerful computer programming language\" .');\n              const parts = parseCodeBlocks(modifiedMessage);\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"max-w-full break-words rounded-lg px-4 py-2 whitespace-pre-wrap self-start bg-gray-300 text-gray-900 flex flex-col\",\n                children: [parts.map((part, i) => {\n                  if (part.type === 'code') {\n                    return /*#__PURE__*/_jsxDEV(CodeBlock, {\n                      lang: part.lang,\n                      content: part.content\n                    }, i, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 953,\n                      columnNumber: 32\n                    }, this);\n                  } else {\n                    return /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: part.content\n                    }, i, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 955,\n                      columnNumber: 32\n                    }, this);\n                  }\n                }), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => navigator.clipboard.writeText(modifiedMessage),\n                  className: \"self-start mt-2 flex items-center space-x-1 text-gray-600 hover:text-gray-900 text-xs\",\n                  \"aria-label\": \"Copy AI answer\",\n                  title: \"Copy AI answer\",\n                  children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                    xmlns: \"http://www.w3.org/2000/svg\",\n                    fill: \"none\",\n                    viewBox: \"0 0 24 24\",\n                    stroke: \"currentColor\",\n                    strokeWidth: 2,\n                    className: \"w-4 h-4\",\n                    children: [/*#__PURE__*/_jsxDEV(\"rect\", {\n                      x: \"8\",\n                      y: \"8\",\n                      width: \"12\",\n                      height: \"12\",\n                      strokeLinecap: \"round\",\n                      strokeLinejoin: \"round\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 965,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"rect\", {\n                      x: \"4\",\n                      y: \"4\",\n                      width: \"12\",\n                      height: \"12\",\n                      strokeLinecap: \"round\",\n                      strokeLinejoin: \"round\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 966,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 964,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Copy\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 968,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 958,\n                  columnNumber: 21\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 947,\n                columnNumber: 19\n              }, this);\n            } else {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"max-w-full break-words rounded-lg px-4 py-2 whitespace-pre-wrap self-end bg-blue-500 text-white\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: entry.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 978,\n                  columnNumber: 21\n                }, this)\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 974,\n                columnNumber: 19\n              }, this);\n            }\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 889,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowHistory(!showHistory),\n          className: \"mb-2 px-4 py-2 bg-gray-500 text-white rounded\",\n          children: \"View History\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 985,\n          columnNumber: 11\n        }, this), showHistory && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"History\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 988,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: conversation.filter(c => c.sender === 'user').map((c, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n              children: c.message\n            }, i, false, {\n              fileName: _jsxFileName,\n              lineNumber: 990,\n              columnNumber: 78\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 989,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 987,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative w-full rounded border border-gray-300 focus-within:ring-2 focus-within:ring-blue-500 flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: aiPrompt,\n            onChange: e => setAiPrompt(e.target.value),\n            className: \"flex-grow p-3 focus:outline-none pr-12 bg-transparent rounded-l text-gray-700\",\n            placeholder: \"Send a message\",\n            disabled: aiLoading,\n            onKeyDown: e => {\n              if (e.key === 'Enter' && !aiLoading) {\n                e.preventDefault();\n                if (!aiPrompt.trim()) {\n                  setError('Please enter a prompt for AI.');\n                  return;\n                }\n                setAiLoading(true);\n                setError('');\n                // Add user message to conversation (append to bottom)\n                setConversation(prev => [...prev, {\n                  sender: 'user',\n                  message: aiPrompt\n                }]);\n                fetch('http://localhost:3003/ai', {\n                  method: 'POST',\n                  headers: {\n                    'Content-Type': 'application/json'\n                  },\n                  body: JSON.stringify({\n                    prompt: aiPrompt\n                  })\n                }).then(response => {\n                  if (!response.ok) {\n                    throw new Error('Failed to get AI response');\n                  }\n                  return response.json();\n                }).then(data => {\n                  // Add AI response to conversation (append to bottom)\n                  setConversation(prev => [...prev, {\n                    sender: 'ai',\n                    message: data.response\n                  }]);\n                  setAiPrompt(''); // Clear input after sending\n                }).catch(() => {\n                  setError('Error fetching AI response.');\n                }).finally(() => {\n                  setAiLoading(false);\n                });\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 995,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: async () => {\n              if (!aiPrompt.trim()) {\n                setError('Please enter a prompt for AI.');\n                return;\n              }\n              setAiLoading(true);\n              setError('');\n              // Add user message to conversation (append to bottom)\n              setConversation(prev => [...prev, {\n                sender: 'user',\n                message: aiPrompt\n              }]);\n              try {\n                const response = await fetch('http://localhost:3003/ai', {\n                  method: 'POST',\n                  headers: {\n                    'Content-Type': 'application/json'\n                  },\n                  body: JSON.stringify({\n                    prompt: aiPrompt\n                  })\n                });\n                if (!response.ok) {\n                  throw new Error('Failed to get AI response');\n                }\n                const data = await response.json();\n                // Add AI response to conversation (append to bottom)\n                setConversation(prev => [...prev, {\n                  sender: 'ai',\n                  message: data.response\n                }]);\n                setAiPrompt(''); // Clear input after sending\n              } catch (err) {\n                setError('Error fetching AI response.');\n              } finally {\n                setAiLoading(false);\n              }\n            },\n            disabled: aiLoading,\n            className: \"p-3 text-gray-600 rounded-r hover:bg-gray-200 disabled:opacity-50 flex items-center justify-center\",\n            \"aria-label\": \"Send to AI\",\n            children: aiLoading ? '' : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1038,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 994,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 887,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 827,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 789,\n    columnNumber: 5\n  }, this);\n}\n_s(IAFlowchart, \"z4MgMhPtPraJs2AV0Op1ovxwop8=\", false, function () {\n  return [useNavigate];\n});\n_c = IAFlowchart;\nexport default IAFlowchart;\nvar _c;\n$RefreshReg$(_c, \"IAFlowchart\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","useMemo","d3","Link","useNavigate","jsxDEV","_jsxDEV","IAFlowchart","_s","navigate","iaData","setIaData","graphData","setGraphData","nodes","links","snapToGrid","setSnapToGrid","editingNodeId","setEditingNodeId","editingText","setEditingText","error","setError","loading","setLoading","width","setWidth","height","setHeight","selectedNodeName","setSelectedNodeName","inputText","setInputText","aiPrompt","setAiPrompt","conversation","setConversation","aiLoading","setAiLoading","showHistory","setShowHistory","legendPosition","setLegendPosition","x","y","isDraggingLegend","setIsDraggingLegend","dragOffset","setDragOffset","svgRef","zoomRef","gRef","conversationEndRef","current","scrollTop","scrollHeight","fetch","then","res","json","data","messages","catch","err","console","templates","name","type","children","label","linkType","genericTemplate","colors","hierarchyToGraph","treeLayout","tree","size","root","hierarchy","traverse","d","parentId","depth","id","length","hasChildren","push","fx","fy","source","target","forEach","child","addChildToNode","parentName","newChild","i","updated","removeNodeByName","targetName","map","filter","Boolean","handleResize","window","innerWidth","innerHeight","addEventListener","removeEventListener","fetchData","response","ok","zoomIn","scaleBy","select","zoomOut","fitToScreen","bounds","getBBox","fullWidth","fullHeight","midX","midY","scale","translate","transform","zoomIdentity","resetView","addNode","Date","now","newIaData","JSON","parse","stringify","deleteNode","updatedRoot","startEditing","saveEditing","prev","n","cancelEditing","getNodePath","w","h","rx","ry","generateIA","keyword","trim","toLowerCase","generated","setTimeout","svg","selectAll","remove","g","append","node","zoom","scaleExtent","on","event","attr","call","defs","shadowFilter","glowFilter","feMerge","link","enter","linkArc","style","linkLabel","Math","min","text","classed","drag","dragstarted","dragged","dragended","stopPropagation","l","transition","duration","each","group","foreignObject","property","value","key","dx","dy","cp1x","cp1y","cp2x","cp2y","round","handleKeyDown","tagName","isContentEditable","preventDefault","document","className","to","fileName","_jsxFileName","lineNumber","columnNumber","onChange","e","disabled","placeholder","onClick","role","ref","left","top","onMouseDown","clientX","clientY","onMouseUp","onMouseLeave","onMouseMove","entry","index","parseCodeBlocks","regex","parts","lastIndex","match","exec","content","substring","lang","CodeBlock","copyCode","navigator","clipboard","writeText","title","xmlns","fill","viewBox","stroke","strokeWidth","strokeLinecap","strokeLinejoin","sender","cleanedMessage","message","replace","modifiedMessage","part","c","onKeyDown","method","headers","body","prompt","Error","finally","_c","$RefreshReg$"],"sources":["D:/vibe coding/ai_project_finial/IA-Mate-repo/frontend/src/IAFlowchart.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback, useMemo } from 'react';\r\nimport * as d3 from 'd3';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\n\r\nfunction IAFlowchart() {\r\n  const navigate = useNavigate();\r\n  const [iaData, setIaData] = useState(null);\r\n  const [graphData, setGraphData] = useState({ nodes: [], links: [] });\r\n  const [snapToGrid, setSnapToGrid] = useState(false);\r\n  const [editingNodeId, setEditingNodeId] = useState(null);\r\n  const [editingText, setEditingText] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [width, setWidth] = useState(800);\r\n  const [height, setHeight] = useState(600);\r\n  const [selectedNodeName, setSelectedNodeName] = useState(null);\r\n  const [inputText, setInputText] = useState('');\r\n  const [aiPrompt, setAiPrompt] = useState('');\r\n  // Store conversation history as array of { sender: 'user' | 'ai', message: string }\r\n  const [conversation, setConversation] = useState([]);\r\n  const [aiLoading, setAiLoading] = useState(false);\r\n  const [showHistory, setShowHistory] = useState(false);\r\n  // Removed aiResponse and setAiResponse state\r\n  const [legendPosition, setLegendPosition] = useState({ x: 80, y: 200 });\r\n  const [isDraggingLegend, setIsDraggingLegend] = useState(false);\r\n  const [dragOffset, setDragOffset] = useState({ x: 0, y: 0 });\r\n  const svgRef = useRef();\r\n  const zoomRef = useRef();\r\n  const gRef = useRef();\r\n\r\n  const conversationEndRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (conversationEndRef.current) {\r\n      conversationEndRef.current.scrollTop = conversationEndRef.current.scrollHeight;\r\n    }\r\n  }, [conversation]);\r\n\r\n  useEffect(() => {\r\n    // Load conversations from DB on mount\r\n    fetch('http://localhost:3003/conversations')\r\n      .then(res => res.json())\r\n      .then(data => setConversation(data.messages || []))\r\n      .catch(err => console.error('Failed to load conversations', err));\r\n  }, []);\r\n\r\n  const templates = useMemo(() => ({\r\n    'e-commerce': {\r\n      name: 'E-commerce Site',\r\n      type: 'page',\r\n      children: [\r\n        { name: 'Home', type: 'page' },\r\n        {\r\n          name: 'Browse Products',\r\n          type: 'action',\r\n          children: [\r\n            { name: 'Product Details', type: 'page' }\r\n          ]\r\n        },\r\n        { name: 'Shopping Cart', type: 'page' },\r\n        {\r\n          name: 'Checkout',\r\n          type: 'action',\r\n          label: 'Proceed to payment'\r\n        },\r\n        {\r\n          name: 'Login Required?',\r\n          type: 'decision',\r\n          children: [\r\n            { name: 'Login', type: 'action', label: 'User authentication' },\r\n            { name: 'Guest Checkout', type: 'page', linkType: 'related', label: 'Alternative path' }\r\n          ]\r\n        },\r\n        {\r\n          name: 'Payment Method',\r\n          type: 'decision',\r\n          children: [\r\n            { name: 'Credit Card', type: 'page', label: 'Choose Card' },\r\n            { name: 'PayPal', type: 'action', label: 'Redirect to PayPal' }\r\n          ]\r\n        },\r\n        { name: 'Order Confirmation', type: 'page' },\r\n        { name: 'User Profile', type: 'page', linkType: 'related' }\r\n      ]\r\n    },\r\n    'portfolio': {\r\n      name: 'Portfolio Site',\r\n      type: 'page',\r\n      children: [\r\n        { name: 'Home', type: 'page' },\r\n        { name: 'About Me', type: 'page' },\r\n        {\r\n          name: 'Projects',\r\n          type: 'page',\r\n          children: [\r\n            { name: 'Project 1', type: 'page' },\r\n            { name: 'Project 2', type: 'page' }\r\n          ]\r\n        },\r\n        { name: 'Contact', type: 'page' },\r\n        { name: 'Blog', type: 'page', linkType: 'related' }\r\n      ]\r\n    },\r\n    'blog': {\r\n      name: 'Blog Site',\r\n      type: 'page',\r\n      children: [\r\n        { name: 'Home', type: 'page' },\r\n        {\r\n          name: 'Posts List',\r\n          type: 'page',\r\n          children: [\r\n            { name: 'Single Post', type: 'page' }\r\n          ]\r\n        },\r\n        {\r\n          name: 'Categories',\r\n          type: 'decision',\r\n          children: [\r\n            { name: 'Technology', type: 'page' },\r\n            { name: 'Design', type: 'page' },\r\n            { name: 'Lifestyle', type: 'page' }\r\n          ]\r\n        },\r\n        { name: 'About', type: 'page' },\r\n        { name: 'Comments Section', type: 'action', linkType: 'related' }\r\n      ]\r\n    },\r\n    'restaurant': {\r\n      name: 'Restaurant Site',\r\n      type: 'page',\r\n      children: [\r\n        { name: 'Home', type: 'page' },\r\n        { name: 'Menu', type: 'page' },\r\n        {\r\n          name: 'Browse Dishes',\r\n          type: 'action',\r\n          children: [\r\n            { name: 'Dish Details', type: 'page' }\r\n          ]\r\n        },\r\n        {\r\n          name: 'Order Online',\r\n          type: 'decision',\r\n          children: [\r\n            { name: 'Dine In', type: 'page', label: 'Reserve table' },\r\n            { name: 'Takeaway', type: 'action', label: 'Quick order' }\r\n          ]\r\n        },\r\n        { name: 'Reservations', type: 'page' },\r\n        { name: 'Contact', type: 'page', linkType: 'related' },\r\n        { name: 'Reviews', type: 'page' }\r\n      ]\r\n    },\r\n    'university': {\r\n      name: 'University Site',\r\n      type: 'page',\r\n      children: [\r\n        { name: 'Home', type: 'page' },\r\n        {\r\n          name: 'Admissions',\r\n          type: 'decision',\r\n          children: [\r\n            { name: 'Apply Online', type: 'action' },\r\n            { name: 'Visit Campus', type: 'page', linkType: 'related' }\r\n          ]\r\n        },\r\n        { name: 'Courses', type: 'page' },\r\n        {\r\n          name: 'Enroll',\r\n          type: 'action',\r\n          children: [\r\n            { name: 'Course Details', type: 'page' }\r\n          ]\r\n        },\r\n        { name: 'Library', type: 'page' },\r\n        { name: 'Resources', type: 'page', linkType: 'related' },\r\n        { name: 'Contact', type: 'page' }\r\n      ]\r\n    },\r\n    'banking app': {\r\n      name: 'Banking App',\r\n      type: 'page',\r\n      children: [\r\n        { name: 'Login', type: 'action' },\r\n        { name: 'Dashboard', type: 'page' },\r\n        {\r\n          name: 'Transfer Funds',\r\n          type: 'decision',\r\n          children: [\r\n            { name: 'Internal Transfer', type: 'action' },\r\n            { name: 'External Transfer', type: 'page', label: 'To other banks' }\r\n          ]\r\n        },\r\n        { name: 'Account Details', type: 'page' },\r\n        { name: 'Support', type: 'page', linkType: 'related' },\r\n        { name: 'Transactions', type: 'page' }\r\n      ]\r\n    }\r\n  }), []);\r\n\r\n  const genericTemplate = useMemo(() => ({\r\n    name: 'Generic Site',\r\n    type: 'page',\r\n    children: [\r\n      { name: 'Home', type: 'page' },\r\n      { name: 'Services', type: 'page' },\r\n      {\r\n        name: 'Service Selection',\r\n        type: 'decision',\r\n        children: [\r\n          { name: 'Basic Service', type: 'action' },\r\n          { name: 'Premium Service', type: 'page' }\r\n        ]\r\n      },\r\n      { name: 'Blog', type: 'page', linkType: 'related' },\r\n      { name: 'Login', type: 'action' },\r\n      { name: 'Contact', type: 'page' },\r\n      {\r\n        name: 'Checkout',\r\n        type: 'decision',\r\n        children: [\r\n          { name: 'Payment Methods', type: 'page' },\r\n          { name: 'Order Review', type: 'action' }\r\n        ]\r\n      },\r\n      { name: 'Payment', type: 'page' }\r\n    ]\r\n  }), []);\r\n\r\n  const colors = useMemo(() => ['#f8fafc', '#e2e8f0', '#cbd5e1', '#94a3b8', '#64748b'], []);\r\n\r\n  const hierarchyToGraph = useCallback((data) => {\r\n    const nodes = [];\r\n    const links = [];\r\n\r\n    // Use tree layout for initial positions to avoid random overlaps\r\n    const treeLayout = d3.tree().size([height - 100, width - 200]);\r\n    const root = d3.hierarchy(data);\r\n    treeLayout(root);\r\n\r\n    const traverse = (d, parentId = null, depth = 0) => {\r\n      const id = nodes.length;\r\n      const hasChildren = d.children && d.children.length > 0;\r\n      nodes.push({\r\n        id,\r\n        name: d.data.name,\r\n        type: d.data.type || 'action',\r\n        x: d.y + width / 2, // Horizontal tree\r\n        y: d.x + height / 2,\r\n        depth,\r\n        fx: d.y + width / 2,\r\n        fy: d.x + height / 2,\r\n        hasChildren,\r\n      });\r\n\r\n      if (parentId !== null) {\r\n        links.push({\r\n          source: nodes[parentId],\r\n          target: nodes[id],\r\n          label: d.data.label || '',\r\n          type: d.data.linkType || 'direct'\r\n        });\r\n      }\r\n\r\n      if (d.children) {\r\n        d.children.forEach(child => traverse(child, id, depth + 1));\r\n      }\r\n    };\r\n\r\n    traverse(root);\r\n    return { nodes, links };\r\n  }, [width, height]);\r\n\r\n  // Define recursive functions using useCallback to avoid parsing issues\r\n  const addChildToNode = useCallback((root, parentName, newChild) => {\r\n    if (root.name === parentName) {\r\n      root.children = root.children || [];\r\n      root.children.push(newChild);\r\n      return root;\r\n    }\r\n    if (root.children) {\r\n      for (let i = 0; i < root.children.length; i++) {\r\n        const updated = addChildToNode(root.children[i], parentName, newChild);\r\n        if (updated) {\r\n          root.children[i] = updated;\r\n          return root;\r\n        }\r\n      }\r\n    }\r\n    return null;\r\n  }, []);\r\n\r\n  const removeNodeByName = useCallback((root, targetName) => {\r\n    if (root.name === targetName) {\r\n      return null; // Remove this node\r\n    }\r\n    if (root.children) {\r\n      root.children = root.children.map(child => removeNodeByName(child, targetName)).filter(Boolean);\r\n      return root;\r\n    }\r\n    return root;\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      setWidth(window.innerWidth - 40);\r\n      setHeight(window.innerHeight - 200);\r\n    };\r\n    handleResize();\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  // Removed JSON upload feature, replaced with Referent feature placeholder\r\n  // const handleFileUpload = async (event) => {\r\n  //   const file = event.target.files[0];\r\n  //   if (!file) return;\r\n\r\n  //   if (!file.name.endsWith('.json')) {\r\n  //     setError('Please select a JSON file.');\r\n  //     return;\r\n  //   }\r\n\r\n  //   setLoading(true);\r\n  //   setError('');\r\n\r\n  //   try {\r\n  //     const text = await file.text();\r\n  //     const jsonData = JSON.parse(text);\r\n  //     setIaData(jsonData);\r\n  //     setError('');\r\n  //   } catch (err) {\r\n  //     setError('Invalid JSON file.');\r\n  //   } finally {\r\n  //     setLoading(false);\r\n  //   }\r\n  // };\r\n\r\n  useEffect(() => {\r\n    if (iaData) {\r\n      setGraphData(hierarchyToGraph(iaData));\r\n    }\r\n  }, [iaData, hierarchyToGraph]);\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      const response = await fetch('http://localhost:3003/ia');\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setIaData(data);\r\n        setError('');\r\n      } else {\r\n        setIaData(null);\r\n        setError('');\r\n      }\r\n    } catch (err) {\r\n      setError('Failed to fetch data.');\r\n    }\r\n  };\r\n\r\n  const zoomIn = useCallback(() => {\r\n    if (zoomRef.current) {\r\n      zoomRef.current.scaleBy(d3.select(svgRef.current), 1.2);\r\n    }\r\n  }, []);\r\n\r\n  const zoomOut = useCallback(() => {\r\n    if (zoomRef.current) {\r\n      zoomRef.current.scaleBy(d3.select(svgRef.current), 0.8);\r\n    }\r\n  }, []);\r\n\r\n  const fitToScreen = useCallback(() => {\r\n    if (gRef.current && svgRef.current) {\r\n      const bounds = gRef.current.getBBox();\r\n      const fullWidth = width;\r\n      const fullHeight = height;\r\n      const midX = (bounds.x + bounds.width / 2);\r\n      const midY = (bounds.y + bounds.height / 2);\r\n      const scale = 0.85;\r\n      const translate = [fullWidth / 2 - scale * midX, fullHeight / 2 - scale * midY];\r\n      zoomRef.current.transform(d3.select(svgRef.current), d3.zoomIdentity.translate(translate[0], translate[1]).scale(scale));\r\n    }\r\n  }, [width, height]);\r\n\r\n  const resetView = useCallback(() => {\r\n    if (zoomRef.current) {\r\n      zoomRef.current.transform(d3.select(svgRef.current), d3.zoomIdentity);\r\n    }\r\n  }, []);\r\n\r\n  const addNode = useCallback(() => {\r\n    if (!selectedNodeName || !iaData) return;\r\n\r\n    const newChild = {\r\n      name: `New Node ${Date.now()}`,\r\n      type: 'action',\r\n      children: []\r\n    };\r\n\r\n    const newIaData = JSON.parse(JSON.stringify(iaData)); // Deep copy\r\n    addChildToNode(newIaData, selectedNodeName, newChild);\r\n    setIaData(newIaData);\r\n    setSelectedNodeName(null);\r\n  }, [iaData, selectedNodeName, addChildToNode]);\r\n\r\n  const deleteNode = useCallback(() => {\r\n    if (!selectedNodeName || !iaData) return;\r\n\r\n    const newIaData = JSON.parse(JSON.stringify(iaData)); // Deep copy\r\n    const updatedRoot = removeNodeByName(newIaData, selectedNodeName);\r\n    if (updatedRoot) {\r\n      setIaData(updatedRoot);\r\n    } else {\r\n      setIaData(null);\r\n    }\r\n    setSelectedNodeName(null);\r\n  }, [iaData, selectedNodeName, removeNodeByName]);\r\n\r\n  const startEditing = useCallback((d) => {\r\n    setEditingNodeId(d.id);\r\n    setEditingText(d.name);\r\n  }, []);\r\n\r\n  const saveEditing = useCallback(() => {\r\n    if (editingNodeId !== null) {\r\n      setGraphData(prev => ({\r\n        ...prev,\r\n        nodes: prev.nodes.map(n => n.id === editingNodeId ? { ...n, name: editingText } : n)\r\n      }));\r\n      setEditingNodeId(null);\r\n      setEditingText('');\r\n    }\r\n  }, [editingNodeId, editingText]);\r\n\r\n  const cancelEditing = useCallback(() => {\r\n    setEditingNodeId(null);\r\n    setEditingText('');\r\n  }, []);\r\n\r\n  const getNodePath = useCallback((d) => {\r\n    const w = 80; // half width 160\r\n    const h = 30; // half height 60\r\n    const rx = 8;\r\n    const ry = 8;\r\n\r\n    switch (d.type) {\r\n      case 'action':\r\n        // Oval (ellipse)\r\n        return `M ${-w} 0 A ${w} ${h} 0 1 1 ${w} 0 A ${w} ${h} 0 1 1 ${-w} 0 Z`;\r\n      case 'decision':\r\n        // Diamond\r\n        return `M 0 ${-h} L ${w} 0 L 0 ${h} L ${-w} 0 Z`;\r\n      case 'page':\r\n      default:\r\n        // Rounded rectangle\r\n        return `M ${-w + rx} ${-h} h ${w - 2 * rx} a ${rx} ${ry} 0 0 1 ${rx} ${ry} v ${h - 2 * ry} a ${rx} ${ry} 0 0 1 -${rx} ${ry} h ${-(w - 2 * rx)} a ${rx} ${ry} 0 0 1 -${rx} -${ry} v ${-(h - 2 * ry)} a ${rx} ${ry} 0 0 1 ${rx} -${ry} z`;\r\n    }\r\n  }, []);\r\n\r\n  const generateIA = useCallback(() => {\r\n    const keyword = inputText.trim().toLowerCase();\r\n    if (!keyword) {\r\n      setError('Please enter a keyword');\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    setError('');\r\n    try {\r\n      let generated;\r\n      if (templates[keyword]) {\r\n        generated = templates[keyword];\r\n      } else {\r\n        generated = genericTemplate;\r\n        setError('Keyword not recognized. Using generic template. Try \"e-commerce\", \"portfolio\", or \"blog\".');\r\n      }\r\n      setIaData(generated);\r\n      // Auto-fit after generation\r\n      setTimeout(() => fitToScreen(), 100);\r\n    } catch (err) {\r\n      setError('Failed to generate IA.');\r\n      setIaData(genericTemplate);\r\n      setTimeout(() => fitToScreen(), 100);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [inputText, templates, genericTemplate, fitToScreen]);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!graphData.nodes.length || error) return;\r\n\r\n    const svg = d3.select(svgRef.current);\r\n    svg.selectAll('*').remove();\r\n\r\n    const g = svg.append('g');\r\n    gRef.current = g.node();\r\n\r\n    // Add zoom and pan with smooth transitions\r\n    zoomRef.current = d3.zoom()\r\n      .scaleExtent([0.1, 4])\r\n      .on('zoom', (event) => {\r\n        if (gRef.current) d3.select(gRef.current).attr('transform', event.transform);\r\n      });\r\n\r\n    svg.call(zoomRef.current);\r\n\r\n    // Enhanced defs for arrow markers, shadow, and glow\r\n    const defs = svg.append('defs');\r\n\r\n    // Arrowhead\r\n    defs.append('marker')\r\n      .attr('id', 'arrowhead')\r\n      .attr('viewBox', '-0 -5 10 10')\r\n      .attr('refX', 15)\r\n      .attr('refY', 0)\r\n      .attr('orient', 'auto')\r\n      .attr('markerWidth', 8)\r\n      .attr('markerHeight', 8)\r\n      .attr('xoverflow', 'visible')\r\n      .append('path')\r\n      .attr('d', 'M 0,-5 L 10 ,0 L 0,5')\r\n      .attr('fill', '#6b7280')\r\n      .attr('stroke', 'none');\r\n\r\n    // Soft shadow\r\n    const shadowFilter = defs.append('filter')\r\n      .attr('id', 'shadow')\r\n      .attr('x', '-50%')\r\n      .attr('y', '-50%')\r\n      .attr('width', '200%')\r\n      .attr('height', '200%');\r\n\r\n    shadowFilter.append('feDropShadow')\r\n      .attr('dx', 1)\r\n      .attr('dy', 1)\r\n      .attr('stdDeviation', 3)\r\n      .attr('flood-color', 'rgba(0,0,0,0.2)');\r\n\r\n    // Glow for hover\r\n    const glowFilter = defs.append('filter')\r\n      .attr('id', 'glow')\r\n      .attr('x', '-50%')\r\n      .attr('y', '-50%')\r\n      .attr('width', '200%')\r\n      .attr('height', '200%');\r\n\r\n    glowFilter.append('feGaussianBlur')\r\n      .attr('in', 'SourceAlpha')\r\n      .attr('stdDeviation', 3)\r\n      .attr('result', 'blur');\r\n\r\n    glowFilter.append('feOffset')\r\n      .attr('in', 'blur')\r\n      .attr('dx', 0)\r\n      .attr('dy', 0)\r\n      .attr('result', 'offsetBlur');\r\n\r\n    glowFilter.append('feFlood')\r\n      .attr('flood-color', '#3b82f6')\r\n      .attr('flood-opacity', '0.8')\r\n      .attr('result', 'glowColor');\r\n\r\n    glowFilter.append('feComposite')\r\n      .attr('in', 'glowColor')\r\n      .attr('in2', 'offsetBlur')\r\n      .attr('operator', 'in')\r\n      .attr('result', 'glowShape');\r\n\r\n    const feMerge = glowFilter.append('feMerge');\r\n    feMerge.append('feMergeNode').attr('in', 'glowShape');\r\n    feMerge.append('feMergeNode').attr('in', 'SourceGraphic');\r\n\r\n    // Curved links for smoother appearance\r\n    const link = g.selectAll('.link')\r\n      .data(graphData.links)\r\n      .enter().append('path')\r\n      .attr('class', 'link')\r\n      .attr('fill', 'none')\r\n      .attr('marker-end', 'url(#arrowhead)')\r\n      .attr('stroke', '#9ca3af')\r\n      .attr('stroke-width', 2.5)\r\n      .attr('stroke-dasharray', d => d.type === 'related' ? '5,5' : 'none')\r\n      .attr('d', linkArc)\r\n      .style('transition', 'stroke 0.3s ease, stroke-width 0.3s ease');\r\n\r\n    // Link labels (hidden if empty)\r\n    const linkLabel = g.selectAll('.link-label')\r\n      .data(graphData.links)\r\n      .enter().append('text')\r\n      .attr('class', 'link-label')\r\n      .attr('font-size', 12)\r\n      .attr('fill', '#6b7280')\r\n      .attr('text-anchor', 'middle')\r\n      .attr('dominant-baseline', 'middle')\r\n      .attr('x', d => (d.source.x + d.target.x) / 2)\r\n      .attr('y', d => Math.min(d.source.y, d.target.y) - 15)\r\n      .style('pointer-events', 'none')\r\n      .text(d => d.label || '')\r\n      .style('display', d => d.label ? 'block' : 'none')\r\n      .style('text-shadow', '1px 1px 2px rgba(255,255,255,0.8)');\r\n\r\n    // Nodes with animations, hover glow\r\n    const node = g.selectAll('.node')\r\n      .data(graphData.nodes)\r\n      .enter().append('g')\r\n      .classed('node', true)\r\n      .attr('opacity', 0)\r\n      .style('transition', 'opacity 0.5s ease')\r\n      .call(d3.drag()\r\n        .on('start', dragstarted)\r\n        .on('drag', dragged)\r\n        .on('end', dragended)\r\n      )\r\n      .on('click', (event, d) => {\r\n        if (editingNodeId !== null) {\r\n          saveEditing();\r\n        }\r\n        setSelectedNodeName(d.name);\r\n      })\r\n      .on('dblclick', (event, d) => {\r\n        event.stopPropagation();\r\n        startEditing(d);\r\n      })\r\n      .on('mouseover', function(event, d) {\r\n        d3.select(this).select('path')\r\n          .attr('filter', 'url(#glow)')\r\n          .attr('stroke', '#3b82f6')\r\n          .attr('stroke-width', 4);\r\n        // Highlight outgoing links\r\n        g.selectAll('.link').filter(l => l.source.id === d.id)\r\n          .attr('stroke', '#3b82f6').attr('stroke-width', 3.5);\r\n      })\r\n      .on('mouseout', function(event, d) {\r\n        d3.select(this).select('path')\r\n          .attr('filter', 'url(#shadow)')\r\n          .attr('stroke', selectedNodeName === d.name ? '#3b82f6' : colors[d.depth % colors.length])\r\n          .attr('stroke-width', selectedNodeName === d.name ? 4 : 2.5);\r\n        g.selectAll('.link').attr('stroke', '#9ca3af').attr('stroke-width', 2.5);\r\n      });\r\n\r\n    // Set node positions directly from tree layout\r\n    node\r\n      .attr('opacity', 0)\r\n      .attr('transform', d => `translate(${d.x}, ${d.y}) scale(0.5)`)\r\n      .transition()\r\n      .duration(500)\r\n      .attr('opacity', 1)\r\n      .attr('transform', d => `translate(${d.x}, ${d.y}) scale(1)`);\r\n\r\n    node.append('path')\r\n      .attr('d', getNodePath)\r\n      .attr('fill', d => {\r\n        switch (d.type) {\r\n          case 'page': return '#dbeafe';\r\n          case 'action': return '#dcfce7';\r\n          case 'decision': return '#fed7aa';\r\n          default: return '#f8fafc';\r\n        }\r\n      })\r\n      .attr('stroke', d => selectedNodeName === d.name ? '#3b82f6' : colors[d.depth % colors.length])\r\n      .attr('stroke-width', d => selectedNodeName === d.name ? 4 : 2.5)\r\n      .attr('filter', 'url(#shadow)');\r\n\r\n    node.each(function(d) {\r\n      const group = d3.select(this);\r\n      if (d.id === editingNodeId) {\r\n        const foreignObject = group.append('foreignObject')\r\n          .attr('x', -80)\r\n          .attr('y', -30)\r\n          .attr('width', 160)\r\n          .attr('height', 60);\r\n\r\n        foreignObject.append('xhtml:input')\r\n          .attr('type', 'text')\r\n          .property('value', editingText)\r\n          .style('width', '100%')\r\n          .style('height', '100%')\r\n          .style('border', 'none')\r\n          .style('outline', 'none')\r\n          .style('font-size', '14px')\r\n          .style('font-family', 'Inter, system-ui, sans-serif')\r\n          .style('font-weight', 'bold')\r\n          .style('text-align', 'center')\r\n          .style('display', 'flex')\r\n          .style('align-items', 'center')\r\n          .style('justify-content', 'center')\r\n          .on('input', function(event) {\r\n            setEditingText(event.target.value);\r\n          })\r\n          .on('keydown', function(event) {\r\n            if (event.key === 'Enter') {\r\n              saveEditing();\r\n            } else if (event.key === 'Escape') {\r\n              cancelEditing();\r\n            }\r\n          })\r\n          .on('blur', saveEditing);\r\n      } else {\r\n        group.append('text')\r\n          .attr('text-anchor', 'middle')\r\n          .attr('x', 0)\r\n          .attr('y', 0)\r\n          .attr('dy', '.35em')\r\n          .attr('font-size', '14px')\r\n          .attr('font-family', 'Inter, system-ui, sans-serif')\r\n          .attr('font-weight', 'bold')\r\n          .attr('fill', '#1f2937')\r\n          .text(d => d.name)\r\n          .style('pointer-events', 'none');\r\n      }\r\n    });\r\n\r\n    function linkArc(d) {\r\n      const source = d.source;\r\n      const target = d.target;\r\n      // Curved bezier line for smoother appearance\r\n      const dx = target.x - source.x;\r\n      const dy = target.y - source.y;\r\n      const cp1x = source.x + dx / 3;\r\n      const cp1y = source.y + dy / 2 - 20;\r\n      const cp2x = source.x + 2 * dx / 3;\r\n      const cp2y = target.y - dy / 2 + 20;\r\n      return `M ${source.x} ${source.y} C ${cp1x} ${cp1y} ${cp2x} ${cp2y} ${target.x} ${target.y}`;\r\n    }\r\n\r\n    function dragstarted(event, d) {\r\n      // No simulation, just start drag\r\n    }\r\n\r\n    function dragged(event, d) {\r\n      // Constrain both x and y\r\n      d.x = snapToGrid ? Math.round(event.x / 20) * 20 : event.x;\r\n      d.y = snapToGrid ? Math.round(event.y / 20) * 20 : event.y;\r\n      d3.select(this).attr('transform', `translate(${d.x}, ${d.y})`);\r\n      // Update links\r\n      link.attr('d', linkArc);\r\n      linkLabel\r\n        .attr('x', d => (d.source.x + d.target.x) / 2)\r\n        .attr('y', d => Math.min(d.source.y, d.target.y) - 15);\r\n    }\r\n\r\n    function dragended(event, d) {\r\n      // No simulation to stop\r\n    }\r\n  }, [graphData, error, width, height, colors, snapToGrid, selectedNodeName, startEditing, saveEditing, cancelEditing, editingNodeId, editingText, getNodePath]);\r\n\r\n  useEffect(() => {\r\n    const handleKeyDown = (event) => {\r\n      if (event.target.tagName === 'INPUT' || event.target.tagName === 'TEXTAREA' || event.target.isContentEditable) {\r\n        return; // Don't interfere with input fields\r\n      }\r\n\r\n      switch (event.key) {\r\n        case '+':\r\n        case '=':\r\n          event.preventDefault();\r\n          zoomIn();\r\n          break;\r\n        case '-':\r\n          event.preventDefault();\r\n          zoomOut();\r\n          break;\r\n        case 'f':\r\n        case 'F':\r\n          event.preventDefault();\r\n          fitToScreen();\r\n          break;\r\n        case 'r':\r\n        case 'R':\r\n        case '0':\r\n          event.preventDefault();\r\n          resetView();\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    };\r\n\r\n    document.addEventListener('keydown', handleKeyDown);\r\n    return () => document.removeEventListener('keydown', handleKeyDown);\r\n  }, [zoomIn, zoomOut, fitToScreen, resetView]);\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-screen bg-gradient-to-br from-blue-50 to-indigo-100\">\r\n      <div className=\"p-4 bg-white shadow-sm border-b flex justify-between items-center\">\r\n        <div className=\"flex items-center space-x-4\">\r\n          <Link to=\"/\" className=\"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors\">\r\n             Home\r\n          </Link>\r\n          <h1 className=\"text-2xl font-bold text-gray-800\">IA Flowchart Diagram</h1>\r\n        </div>\r\n        <div className=\"flex flex-col items-end space-y-2\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <input\r\n              type=\"text\"\r\n              value={inputText}\r\n              onChange={(e) => setInputText(e.target.value)}\r\n              disabled={loading}\r\n              className=\"w-64 px-3 py-2 border border-gray-300 rounded focus:border-blue-500 focus:outline-none text-sm placeholder-gray-500\"\r\n              placeholder=\"Enter a keyword, e.g., 'e-commerce'\"\r\n            />\r\n            <button\r\n              onClick={generateIA}\r\n              disabled={loading}\r\n              className=\"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:opacity-50\"\r\n            >\r\n              Generate \r\n            </button>\r\n            {/* Referent feature */}\r\n            <button\r\n              onClick={() => navigate('/referent')}\r\n              disabled={loading}\r\n              className=\"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50\"\r\n            >\r\n              Referent\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {loading && <p className=\"p-2 text-blue-500 text-center\">Uploading...</p>}\r\n      {error && <div className=\"p-3 mb-4 text-sm text-red-700 bg-red-100 rounded border border-red-400 text-center\" role=\"alert\">{error}</div>}\r\n      <div className=\"flex-1 relative\">\r\n        <svg ref={svgRef} width={width} height={height} className=\"absolute inset-0 w-full h-full bg-white\">\r\n        </svg>\r\n        {/* Floating Toolbar */}\r\n        <div className=\"absolute top-4 left-4 bg-white shadow-lg rounded-lg p-2 border flex flex-col space-y-1 z-10\">\r\n          <button onClick={zoomIn} className=\"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded text-gray-700 shadow-sm\">+</button>\r\n          <button onClick={zoomOut} className=\"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded text-gray-700 shadow-sm\">-</button>\r\n          <button onClick={fitToScreen} className=\"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded text-gray-700 shadow-sm\"></button>\r\n          <button onClick={resetView} className=\"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded text-gray-700 shadow-sm\"></button>\r\n          <button onClick={addNode} className=\"px-2 py-1 text-xs bg-blue-100 hover:bg-blue-200 rounded text-blue-700 shadow-sm\">+</button>\r\n          <button onClick={deleteNode} disabled={selectedNodeName === null} className=\"px-2 py-1 text-xs bg-red-100 hover:bg-red-200 rounded text-red-700 disabled:opacity-50 shadow-sm\"></button>\r\n          <button onClick={() => setSnapToGrid(!snapToGrid)} className={`px-2 py-1 text-xs rounded text-gray-700 shadow-sm ${snapToGrid ? 'bg-green-100' : 'bg-gray-100 hover:bg-gray-200'}`}></button>\r\n        </div>\r\n        {/* Legend */}\r\n        <div\r\n          className=\"absolute bg-white/90 shadow-lg rounded-lg p-4 border border-gray-200 z-50 max-w-xs backdrop-blur-sm cursor-move select-none\"\r\n          style={{ left: legendPosition.x, top: legendPosition.y }}\r\n          onMouseDown={(e) => {\r\n            setIsDraggingLegend(true);\r\n            setDragOffset({\r\n              x: e.clientX - legendPosition.x,\r\n              y: e.clientY - legendPosition.y,\r\n            });\r\n          }}\r\n          onMouseUp={() => setIsDraggingLegend(false)}\r\n          onMouseLeave={() => setIsDraggingLegend(false)}\r\n          onMouseMove={(e) => {\r\n            if (isDraggingLegend) {\r\n              setLegendPosition({\r\n                x: e.clientX - dragOffset.x,\r\n                y: e.clientY - dragOffset.y,\r\n              });\r\n            }\r\n          }}\r\n        >\r\n          <h3 className=\"text-sm font-semibold text-gray-800 mb-2\">Legend</h3>\r\n          <div className=\"space-y-1 text-xs text-gray-700\">\r\n            <div className=\"flex items-center space-x-2\">\r\n              <span className=\"text-lg\"></span>\r\n              <span className=\"text-blue-600\">Rectangle = Page / Screen</span>\r\n            </div>\r\n            <div className=\"flex items-center space-x-2\">\r\n              <span className=\"text-lg\"></span>\r\n              <span className=\"text-green-600\">Oval = Process / Action</span>\r\n            </div>\r\n            <div className=\"flex items-center space-x-2\">\r\n              <span className=\"text-lg\"></span>\r\n              <span className=\"text-orange-600\">Diamond = Decision</span>\r\n            </div>\r\n            <div className=\"flex items-center space-x-2\">\r\n              <span className=\"text-sm font-mono\"></span>\r\n              <span>Solid line = Direct navigation</span>\r\n            </div>\r\n            <div className=\"flex items-center space-x-2\">\r\n              <span className=\"text-sm font-mono\">- - -</span>\r\n              <span>Dashed line = Related link</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {/* AI Box */}\r\n        <div className=\"absolute top-0 right-0 h-full w-1/4 bg-white shadow-lg border-l border-gray-200 z-10 flex flex-col p-4 backdrop-blur-sm\">\r\n          <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">AI Box</h3>\r\n          <div ref={conversationEndRef} className=\"flex flex-col flex-1 overflow-y-auto mb-4 border border-gray-300 bg-white p-2 space-y-2 rounded-md\">\r\n            {conversation.map((entry, index) => {\r\n              // Function to parse code blocks in message\r\n              const parseCodeBlocks = (text) => {\r\n                const regex = /```(\\w+)?\\n([\\s\\S]*?)```/g;\r\n                const parts = [];\r\n                let lastIndex = 0;\r\n                let match;\r\n                while ((match = regex.exec(text)) !== null) {\r\n                  if (match.index > lastIndex) {\r\n                    parts.push({ type: 'text', content: text.substring(lastIndex, match.index) });\r\n                  }\r\n                  parts.push({ type: 'code', lang: match[1] || '', content: match[2] });\r\n                  lastIndex = regex.lastIndex;\r\n                }\r\n                if (lastIndex < text.length) {\r\n                  parts.push({ type: 'text', content: text.substring(lastIndex) });\r\n                }\r\n                return parts;\r\n              };\r\n\r\n              // Render code block UI\r\n              const CodeBlock = ({ lang, content }) => {\r\n                const copyCode = () => {\r\n                  navigator.clipboard.writeText(content);\r\n                };\r\n                return (\r\n                  <div className=\"relative bg-gray-900 text-gray-100 rounded-md p-4 font-mono text-sm overflow-auto my-2\">\r\n                    <div className=\"flex justify-between items-center mb-2\">\r\n                      <span className=\"text-xs font-semibold\">{lang || 'code'}</span>\r\n                      <button\r\n                        onClick={copyCode}\r\n                        className=\"text-gray-400 hover:text-white text-xs flex items-center space-x-1\"\r\n                        aria-label=\"Copy code\"\r\n                        title=\"Copy code\"\r\n                      >\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2} className=\"w-4 h-4\">\r\n                          <rect x=\"8\" y=\"8\" width=\"12\" height=\"12\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n                          <rect x=\"4\" y=\"4\" width=\"12\" height=\"12\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n                        </svg>\r\n                        <span>Copy code</span>\r\n                      </button>\r\n                    </div>\r\n                    <pre className=\"whitespace-pre-wrap\">{content}</pre>\r\n                  </div>\r\n                );\r\n              };\r\n\r\n              if (entry.sender === 'ai') {\r\n                // Remove ** signs from AI message\r\n                const cleanedMessage = entry.message.replace(/\\*\\*/g, '');\r\n                // Replace specific text pattern in AI message\r\n                const modifiedMessage = cleanedMessage.replace(\r\n                  /Python is a popular and powerful computer programming language\\./g,\r\n                  'Python is a \" popular and powerful computer programming language\" .'\r\n                );\r\n                const parts = parseCodeBlocks(modifiedMessage);\r\n                return (\r\n                  <div\r\n                    key={index}\r\n                    className=\"max-w-full break-words rounded-lg px-4 py-2 whitespace-pre-wrap self-start bg-gray-300 text-gray-900 flex flex-col\"\r\n                  >\r\n                    {parts.map((part, i) => {\r\n                      if (part.type === 'code') {\r\n                        return <CodeBlock key={i} lang={part.lang} content={part.content} />;\r\n                      } else {\r\n                        return <span key={i}>{part.content}</span>;\r\n                      }\r\n                    })}\r\n                    <button\r\n                      onClick={() => navigator.clipboard.writeText(modifiedMessage)}\r\n                      className=\"self-start mt-2 flex items-center space-x-1 text-gray-600 hover:text-gray-900 text-xs\"\r\n                      aria-label=\"Copy AI answer\"\r\n                      title=\"Copy AI answer\"\r\n                    >\r\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2} className=\"w-4 h-4\">\r\n                        <rect x=\"8\" y=\"8\" width=\"12\" height=\"12\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n                        <rect x=\"4\" y=\"4\" width=\"12\" height=\"12\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n                      </svg>\r\n                      <span>Copy</span>\r\n                    </button>\r\n                  </div>\r\n                );\r\n              } else {\r\n                return (\r\n                  <div\r\n                    key={index}\r\n                    className=\"max-w-full break-words rounded-lg px-4 py-2 whitespace-pre-wrap self-end bg-blue-500 text-white\"\r\n                  >\r\n                    <span>{entry.message}</span>\r\n                  </div>\r\n                );\r\n              }\r\n            })}\r\n\r\n          </div>\r\n          <button onClick={() => setShowHistory(!showHistory)} className=\"mb-2 px-4 py-2 bg-gray-500 text-white rounded\">View History</button>\r\n          {showHistory && (\r\n            <div className=\"mb-4\">\r\n              <h4>History</h4>\r\n              <ul>\r\n                {conversation.filter(c => c.sender === 'user').map((c, i) => <li key={i}>{c.message}</li>)}\r\n              </ul>\r\n            </div>\r\n          )}\r\n          <div className=\"relative w-full rounded border border-gray-300 focus-within:ring-2 focus-within:ring-blue-500 flex items-center\">\r\n            <input\r\n              type=\"text\"\r\n              value={aiPrompt}\r\n              onChange={(e) => setAiPrompt(e.target.value)}\r\n              className=\"flex-grow p-3 focus:outline-none pr-12 bg-transparent rounded-l text-gray-700\"\r\n              placeholder=\"Send a message\"\r\n              disabled={aiLoading}\r\n              onKeyDown={(e) => {\r\n                if (e.key === 'Enter' && !aiLoading) {\r\n                  e.preventDefault();\r\n                  if (!aiPrompt.trim()) {\r\n                    setError('Please enter a prompt for AI.');\r\n                    return;\r\n                  }\r\n                  setAiLoading(true);\r\n                  setError('');\r\n                  // Add user message to conversation (append to bottom)\r\n                  setConversation(prev => [...prev, { sender: 'user', message: aiPrompt }]);\r\n                  fetch('http://localhost:3003/ai', {\r\n                    method: 'POST',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify({ prompt: aiPrompt }),\r\n                  })\r\n                    .then(response => {\r\n                      if (!response.ok) {\r\n                        throw new Error('Failed to get AI response');\r\n                      }\r\n                      return response.json();\r\n                    })\r\n                    .then(data => {\r\n                      // Add AI response to conversation (append to bottom)\r\n                      setConversation(prev => [...prev, { sender: 'ai', message: data.response }]);\r\n                      setAiPrompt(''); // Clear input after sending\r\n                    })\r\n                    .catch(() => {\r\n                      setError('Error fetching AI response.');\r\n                    })\r\n                    .finally(() => {\r\n                      setAiLoading(false);\r\n                    });\r\n                }\r\n              }}\r\n            />\r\n            <button\r\n              onClick={async () => {\r\n                if (!aiPrompt.trim()) {\r\n                  setError('Please enter a prompt for AI.');\r\n                  return;\r\n                }\r\n                setAiLoading(true);\r\n                setError('');\r\n                // Add user message to conversation (append to bottom)\r\n                setConversation(prev => [...prev, { sender: 'user', message: aiPrompt }]);\r\n                try {\r\n                  const response = await fetch('http://localhost:3003/ai', {\r\n                    method: 'POST',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify({ prompt: aiPrompt }),\r\n                  });\r\n                  if (!response.ok) {\r\n                    throw new Error('Failed to get AI response');\r\n                  }\r\n                  const data = await response.json();\r\n                  // Add AI response to conversation (append to bottom)\r\n                  setConversation(prev => [...prev, { sender: 'ai', message: data.response }]);\r\n                  setAiPrompt(''); // Clear input after sending\r\n                } catch (err) {\r\n                  setError('Error fetching AI response.');\r\n                } finally {\r\n                  setAiLoading(false);\r\n                }\r\n              }}\r\n              disabled={aiLoading}\r\n              className=\"p-3 text-gray-600 rounded-r hover:bg-gray-200 disabled:opacity-50 flex items-center justify-center\"\r\n              aria-label=\"Send to AI\"\r\n            >\r\n              {aiLoading ? '' : ''}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default IAFlowchart;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}