{"ast":null,"code":"var _jsxFileName = \"/Users/anbschool0009/Desktop/IA-Mate_project/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback, useMemo } from 'react';\nimport * as d3 from 'd3';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [iaData, setIaData] = useState(null);\n  const [graphData, setGraphData] = useState({\n    nodes: [],\n    links: []\n  });\n  const [selectedNode, setSelectedNode] = useState(null);\n  const [snapToGrid, setSnapToGrid] = useState(false);\n  const [expandedNodes, setExpandedNodes] = useState(new Set());\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [width, setWidth] = useState(800);\n  const [height, setHeight] = useState(600);\n  const svgRef = useRef();\n  const zoomRef = useRef();\n  const gRef = useRef();\n  const simulationRef = useRef();\n  const dragLineRef = useRef();\n  const colors = useMemo(() => ['#dbeafe', '#dcfce7', '#f3e8ff', '#fef3c7', '#f0f9ff'], []); // Pastel colors for levels\n\n  useEffect(() => {\n    const handleResize = () => {\n      setWidth(window.innerWidth - 40);\n      setHeight(window.innerHeight - 200);\n    };\n    handleResize();\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n  const handleFileUpload = async event => {\n    const file = event.target.files[0];\n    if (!file) return;\n    if (!file.name.endsWith('.json')) {\n      setError('Please select a JSON file.');\n      return;\n    }\n    setLoading(true);\n    setError('');\n    try {\n      const text = await file.text();\n      const jsonData = JSON.parse(text);\n      const response = await fetch('http://localhost:3001/upload', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(jsonData)\n      });\n      if (response.ok) {\n        setIaData(jsonData);\n        setExpandedNodes(new Set()); // Reset expanded on new upload\n        fetchData();\n      } else {\n        setError('Failed to upload JSON.');\n      }\n    } catch (err) {\n      setError('Invalid JSON file.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const fetchData = async () => {\n    try {\n      const response = await fetch('http://localhost:3001/ia');\n      if (response.ok) {\n        const data = await response.json();\n        setIaData(data);\n        setError('');\n      } else {\n        setIaData(null);\n        setError('No IA data uploaded yet.');\n      }\n    } catch (err) {\n      setError('Failed to fetch data.');\n    }\n  };\n  const toggleNode = useCallback(node => {\n    const nodeId = node.data.name;\n    setExpandedNodes(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(nodeId)) {\n        newSet.delete(nodeId);\n      } else {\n        newSet.add(nodeId);\n      }\n      return newSet;\n    });\n  }, []);\n  const buildHierarchy = useCallback((data, parentExpanded = true) => {\n    const node = d3.hierarchy(data);\n    if (node.children && node.data.name && !expandedNodes.has(node.data.name) && parentExpanded) {\n      // Filter children if not expanded\n      node.children = node.children.filter(child => {\n        const childHierarchy = buildHierarchy(child.data, false);\n        return childHierarchy.children && childHierarchy.children.length > 0; // Only keep if has visible descendants\n      });\n    }\n    return node;\n  }, [expandedNodes]);\n  const zoomIn = useCallback(() => {\n    if (zoomRef.current) {\n      const currentTransform = d3.zoomTransform(svgRef.current);\n      zoomRef.current.transform(svgRef.current, currentTransform.scaleBy(1.2));\n    }\n  }, []);\n  const zoomOut = useCallback(() => {\n    if (zoomRef.current) {\n      const currentTransform = d3.zoomTransform(svgRef.current);\n      zoomRef.current.transform(svgRef.current, currentTransform.scaleBy(0.8));\n    }\n  }, []);\n  const fitToScreen = useCallback(() => {\n    if (gRef.current && svgRef.current) {\n      const bounds = gRef.current.getBBox();\n      const fullWidth = width;\n      const fullHeight = height;\n      const midX = bounds.x + bounds.width / 2;\n      const midY = bounds.y + bounds.height / 2;\n      const scale = 0.85;\n      const translate = [fullWidth / 2 - scale * midX, fullHeight / 2 - scale * midY];\n      zoomRef.current.transform(svgRef.current, d3.zoomIdentity.translate(translate[0], translate[1]).scale(scale));\n    }\n  }, [width, height]);\n  const resetView = useCallback(() => {\n    if (zoomRef.current) {\n      zoomRef.current.transform(svgRef.current, d3.zoomIdentity);\n    }\n  }, []);\n  useEffect(() => {\n    fetchData();\n  }, []);\n  useEffect(() => {\n    if (!iaData || error) return;\n    const svg = d3.select(svgRef.current);\n    svg.selectAll('*').remove();\n\n    // Add zoom and pan with smooth transitions\n    zoomRef.current = d3.zoom().scaleExtent([0.1, 4]).on('zoom', event => {\n      gRef.current.attr('transform', event.transform);\n    });\n    svg.call(zoomRef.current);\n    const g = svg.append('g').attr('ref', gRef);\n\n    // Enhanced defs for arrow markers, shadow, and glow\n    const defs = svg.append('defs');\n\n    // Arrowhead\n    defs.append('marker').attr('id', 'arrowhead').attr('viewBox', '-0 -5 10 10').attr('refX', 15).attr('refY', 0).attr('orient', 'auto').attr('markerWidth', 8).attr('markerHeight', 8).attr('xoverflow', 'visible').append('path').attr('d', 'M 0,-5 L 10 ,0 L 0,5').attr('fill', '#6b7280').attr('stroke', 'none');\n\n    // Soft shadow\n    const shadowFilter = defs.append('filter').attr('id', 'shadow').attr('x', '-50%').attr('y', '-50%').attr('width', '200%').attr('height', '200%');\n    shadowFilter.append('feDropShadow').attr('dx', 1).attr('dy', 1).attr('stdDeviation', 3).attr('flood-color', 'rgba(0,0,0,0.2)');\n\n    // Glow for hover\n    const glowFilter = defs.append('filter').attr('id', 'glow').attr('x', '-50%').attr('y', '-50%').attr('width', '200%').attr('height', '200%');\n    glowFilter.append('feGaussianBlur').attr('stdDeviation', 3).attr('result', 'coloredBlur');\n    const feMerge = glowFilter.append('feMerge');\n    feMerge.append('feMergeNode').attr('in', 'coloredBlur');\n    feMerge.append('feMergeNode').attr('in', 'SourceGraphic');\n    const tree = d3.tree().size([height - 100, width - 200]);\n    const root = buildHierarchy(iaData);\n    const treeData = tree(root);\n\n    // Smooth curved links\n    const link = g.selectAll('.link').data(treeData.links()).enter().append('g').attr('class', 'link').style('transition', 'stroke 0.3s ease');\n    link.append('path').attr('id', (d, i) => `linkPath${i}`).attr('d', d3.linkHorizontal().x(d => d.y).y(d => d.x)).attr('fill', 'none').attr('marker-end', 'url(#arrowhead)').attr('stroke', '#9ca3af').attr('stroke-width', 2).style('transition', 'stroke 0.3s ease, stroke-width 0.3s ease');\n\n    // Link labels (if any)\n    link.append('text').attr('font-size', '10px').attr('fill', '#6b7280').attr('text-anchor', 'middle').style('pointer-events', 'none').append('textPath').attr('startOffset', '50%').attr('xlink:href', (d, i) => `#linkPath${i}`).text(d => d.target.data.label || '');\n\n    // Nodes with animations, collapse, hover glow\n    const node = g.selectAll('.node').data(treeData.descendants()).enter().append('g').classed('node', true).attr('transform', `translate(${width / 2}, 50) scale(0.5)`).attr('opacity', 0).style('transition', 'transform 0.5s ease, opacity 0.5s ease').on('click', (event, d) => {\n      if (d.children || d._children) {\n        toggleNode(d);\n      }\n    }).on('mouseover', function (event, d) {\n      d3.select(this).select('rect').attr('filter', 'url(#glow)').attr('stroke', '#3b82f6').attr('stroke-width', 3);\n      // Highlight connected links (incoming and outgoing)\n      g.selectAll('.link').filter(l => l.source === d || l.target === d).select('path').attr('stroke', '#3b82f6').attr('stroke-width', 3);\n    }).on('mouseout', function (event, d) {\n      d3.select(this).select('rect').attr('filter', 'url(#shadow)').attr('stroke', '#e5e7eb').attr('stroke-width', 1);\n      g.selectAll('.link path').attr('stroke', '#9ca3af').attr('stroke-width', 2);\n    });\n\n    // Animate nodes in\n    node.transition().duration(500).attr('transform', d => `translate(${d.y},${d.x})`).attr('opacity', 1);\n    node.append('rect').attr('width', 140).attr('height', 50).attr('x', -70).attr('y', -25).attr('rx', 10).attr('ry', 10).attr('fill', d => colors[d.depth % colors.length] || '#ffffff').attr('stroke', '#e5e7eb').attr('stroke-width', 1).attr('filter', 'url(#shadow)');\n    node.append('text').attr('text-anchor', 'middle').attr('x', 0).attr('y', 0).attr('dy', '.35em').attr('font-size', '12px').attr('font-weight', 'bold').attr('fill', '#1f2937').text(d => d.data.name).style('pointer-events', 'none');\n\n    // Expand/collapse indicator (simplified, as full collapse needs _children handling)\n    node.filter(d => d.children && d.children.length > 0).append('text').attr('text-anchor', 'end').attr('x', 70).attr('y', 0).attr('font-size', '14px').attr('fill', '#6b7280').text('â–¶').style('cursor', 'pointer').on('click', (event, d) => {\n      event.stopPropagation();\n      toggleNode(d);\n    });\n  }, [iaData, error, width, height, expandedNodes, colors, toggleNode, buildHierarchy]);\n  useEffect(() => {\n    const handleKeyDown = event => {\n      if (event.target.tagName === 'INPUT' || event.target.tagName === 'TEXTAREA' || event.target.isContentEditable) {\n        return; // Don't interfere with input fields\n      }\n      switch (event.key) {\n        case '+':\n        case '=':\n          event.preventDefault();\n          zoomIn();\n          break;\n        case '-':\n          event.preventDefault();\n          zoomOut();\n          break;\n        case 'f':\n        case 'F':\n          event.preventDefault();\n          fitToScreen();\n          break;\n        case 'r':\n        case 'R':\n        case '0':\n          event.preventDefault();\n          resetView();\n          break;\n        default:\n          break;\n      }\n    };\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [zoomIn, zoomOut, fitToScreen, resetView]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col h-screen bg-gradient-to-br from-blue-50 to-indigo-100\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 bg-white shadow-sm border-b flex justify-between items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-2xl font-bold text-gray-800\",\n        children: \"IA Flowchart Diagram\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \".json\",\n          onChange: handleFileUpload,\n          disabled: loading,\n          className: \"file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: fetchData,\n          disabled: loading,\n          className: \"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50\",\n          children: \"Refresh\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"p-2 text-blue-500 text-center\",\n      children: \"Uploading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 19\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"p-2 text-red-500 text-center\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 relative\",\n      children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n        ref: svgRef,\n        width: width,\n        height: height,\n        className: \"absolute inset-0 w-full h-full bg-white\",\n        children: /*#__PURE__*/_jsxDEV(\"g\", {\n          ref: gRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute top-4 right-4 bg-white shadow-lg rounded-lg p-2 border flex flex-col space-y-1 z-10\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: zoomIn,\n          className: \"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded text-gray-700\",\n          children: \"+\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: zoomOut,\n          className: \"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded text-gray-700\",\n          children: \"-\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: fitToScreen,\n          className: \"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded text-gray-700\",\n          children: \"Fit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: resetView,\n          className: \"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded text-gray-700\",\n          children: \"Reset\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 357,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"iuWV5oJwHIFphaBDj9GPFT2rIFU=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","useMemo","d3","jsxDEV","_jsxDEV","App","_s","iaData","setIaData","graphData","setGraphData","nodes","links","selectedNode","setSelectedNode","snapToGrid","setSnapToGrid","expandedNodes","setExpandedNodes","Set","error","setError","loading","setLoading","width","setWidth","height","setHeight","svgRef","zoomRef","gRef","simulationRef","dragLineRef","colors","handleResize","window","innerWidth","innerHeight","addEventListener","removeEventListener","handleFileUpload","event","file","target","files","name","endsWith","text","jsonData","JSON","parse","response","fetch","method","headers","body","stringify","ok","fetchData","err","data","json","toggleNode","node","nodeId","prev","newSet","has","delete","add","buildHierarchy","parentExpanded","hierarchy","children","filter","child","childHierarchy","length","zoomIn","current","currentTransform","zoomTransform","transform","scaleBy","zoomOut","fitToScreen","bounds","getBBox","fullWidth","fullHeight","midX","x","midY","y","scale","translate","zoomIdentity","resetView","svg","select","selectAll","remove","zoom","scaleExtent","on","attr","call","g","append","defs","shadowFilter","glowFilter","feMerge","tree","size","root","treeData","link","enter","style","d","i","linkHorizontal","label","descendants","classed","_children","l","source","transition","duration","depth","stopPropagation","handleKeyDown","tagName","isContentEditable","key","preventDefault","document","className","fileName","_jsxFileName","lineNumber","columnNumber","type","accept","onChange","disabled","onClick","ref","_c","$RefreshReg$"],"sources":["/Users/anbschool0009/Desktop/IA-Mate_project/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback, useMemo } from 'react';\nimport * as d3 from 'd3';\n\nfunction App() {\n  const [iaData, setIaData] = useState(null);\n  const [graphData, setGraphData] = useState({ nodes: [], links: [] });\n  const [selectedNode, setSelectedNode] = useState(null);\n  const [snapToGrid, setSnapToGrid] = useState(false);\n  const [expandedNodes, setExpandedNodes] = useState(new Set());\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [width, setWidth] = useState(800);\n  const [height, setHeight] = useState(600);\n  const svgRef = useRef();\n  const zoomRef = useRef();\n  const gRef = useRef();\n  const simulationRef = useRef();\n  const dragLineRef = useRef();\n\n  const colors = useMemo(() => ['#dbeafe', '#dcfce7', '#f3e8ff', '#fef3c7', '#f0f9ff'], []); // Pastel colors for levels\n\n  useEffect(() => {\n    const handleResize = () => {\n      setWidth(window.innerWidth - 40);\n      setHeight(window.innerHeight - 200);\n    };\n    handleResize();\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  const handleFileUpload = async (event) => {\n    const file = event.target.files[0];\n    if (!file) return;\n\n    if (!file.name.endsWith('.json')) {\n      setError('Please select a JSON file.');\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n\n    try {\n      const text = await file.text();\n      const jsonData = JSON.parse(text);\n\n      const response = await fetch('http://localhost:3001/upload', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(jsonData),\n      });\n\n      if (response.ok) {\n        setIaData(jsonData);\n        setExpandedNodes(new Set()); // Reset expanded on new upload\n        fetchData();\n      } else {\n        setError('Failed to upload JSON.');\n      }\n    } catch (err) {\n      setError('Invalid JSON file.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchData = async () => {\n    try {\n      const response = await fetch('http://localhost:3001/ia');\n      if (response.ok) {\n        const data = await response.json();\n        setIaData(data);\n        setError('');\n      } else {\n        setIaData(null);\n        setError('No IA data uploaded yet.');\n      }\n    } catch (err) {\n      setError('Failed to fetch data.');\n    }\n  };\n\n  const toggleNode = useCallback((node) => {\n    const nodeId = node.data.name;\n    setExpandedNodes(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(nodeId)) {\n        newSet.delete(nodeId);\n      } else {\n        newSet.add(nodeId);\n      }\n      return newSet;\n    });\n  }, []);\n\n  const buildHierarchy = useCallback((data, parentExpanded = true) => {\n    const node = d3.hierarchy(data);\n    if (node.children && node.data.name && !expandedNodes.has(node.data.name) && parentExpanded) {\n      // Filter children if not expanded\n      node.children = node.children.filter(child => {\n        const childHierarchy = buildHierarchy(child.data, false);\n        return childHierarchy.children && childHierarchy.children.length > 0; // Only keep if has visible descendants\n      });\n    }\n    return node;\n  }, [expandedNodes]);\n\n  const zoomIn = useCallback(() => {\n    if (zoomRef.current) {\n      const currentTransform = d3.zoomTransform(svgRef.current);\n      zoomRef.current.transform(svgRef.current, currentTransform.scaleBy(1.2));\n    }\n  }, []);\n\n  const zoomOut = useCallback(() => {\n    if (zoomRef.current) {\n      const currentTransform = d3.zoomTransform(svgRef.current);\n      zoomRef.current.transform(svgRef.current, currentTransform.scaleBy(0.8));\n    }\n  }, []);\n\n  const fitToScreen = useCallback(() => {\n    if (gRef.current && svgRef.current) {\n      const bounds = gRef.current.getBBox();\n      const fullWidth = width;\n      const fullHeight = height;\n      const midX = (bounds.x + bounds.width / 2);\n      const midY = (bounds.y + bounds.height / 2);\n      const scale = 0.85;\n      const translate = [fullWidth / 2 - scale * midX, fullHeight / 2 - scale * midY];\n      zoomRef.current.transform(svgRef.current, d3.zoomIdentity.translate(translate[0], translate[1]).scale(scale));\n    }\n  }, [width, height]);\n\n  const resetView = useCallback(() => {\n    if (zoomRef.current) {\n      zoomRef.current.transform(svgRef.current, d3.zoomIdentity);\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  useEffect(() => {\n    if (!iaData || error) return;\n\n    const svg = d3.select(svgRef.current);\n    svg.selectAll('*').remove();\n\n    // Add zoom and pan with smooth transitions\n    zoomRef.current = d3.zoom()\n      .scaleExtent([0.1, 4])\n      .on('zoom', (event) => {\n        gRef.current.attr('transform', event.transform);\n      });\n\n    svg.call(zoomRef.current);\n\n    const g = svg.append('g')\n      .attr('ref', gRef);\n\n    // Enhanced defs for arrow markers, shadow, and glow\n    const defs = svg.append('defs');\n\n    // Arrowhead\n    defs.append('marker')\n      .attr('id', 'arrowhead')\n      .attr('viewBox', '-0 -5 10 10')\n      .attr('refX', 15)\n      .attr('refY', 0)\n      .attr('orient', 'auto')\n      .attr('markerWidth', 8)\n      .attr('markerHeight', 8)\n      .attr('xoverflow', 'visible')\n      .append('path')\n      .attr('d', 'M 0,-5 L 10 ,0 L 0,5')\n      .attr('fill', '#6b7280')\n      .attr('stroke', 'none');\n\n    // Soft shadow\n    const shadowFilter = defs.append('filter')\n      .attr('id', 'shadow')\n      .attr('x', '-50%')\n      .attr('y', '-50%')\n      .attr('width', '200%')\n      .attr('height', '200%');\n\n    shadowFilter.append('feDropShadow')\n      .attr('dx', 1)\n      .attr('dy', 1)\n      .attr('stdDeviation', 3)\n      .attr('flood-color', 'rgba(0,0,0,0.2)');\n\n    // Glow for hover\n    const glowFilter = defs.append('filter')\n      .attr('id', 'glow')\n      .attr('x', '-50%')\n      .attr('y', '-50%')\n      .attr('width', '200%')\n      .attr('height', '200%');\n\n    glowFilter.append('feGaussianBlur')\n      .attr('stdDeviation', 3)\n      .attr('result', 'coloredBlur');\n\n    const feMerge = glowFilter.append('feMerge');\n    feMerge.append('feMergeNode').attr('in', 'coloredBlur');\n    feMerge.append('feMergeNode').attr('in', 'SourceGraphic');\n\n    const tree = d3.tree().size([height - 100, width - 200]);\n    const root = buildHierarchy(iaData);\n    const treeData = tree(root);\n\n    // Smooth curved links\n    const link = g.selectAll('.link')\n      .data(treeData.links())\n      .enter().append('g')\n      .attr('class', 'link')\n      .style('transition', 'stroke 0.3s ease');\n\n    link.append('path')\n      .attr('id', (d, i) => `linkPath${i}`)\n      .attr('d', d3.linkHorizontal()\n        .x(d => d.y)\n        .y(d => d.x))\n      .attr('fill', 'none')\n      .attr('marker-end', 'url(#arrowhead)')\n      .attr('stroke', '#9ca3af')\n      .attr('stroke-width', 2)\n      .style('transition', 'stroke 0.3s ease, stroke-width 0.3s ease');\n\n    // Link labels (if any)\n    link.append('text')\n      .attr('font-size', '10px')\n      .attr('fill', '#6b7280')\n      .attr('text-anchor', 'middle')\n      .style('pointer-events', 'none')\n      .append('textPath')\n      .attr('startOffset', '50%')\n      .attr('xlink:href', (d, i) => `#linkPath${i}`)\n      .text(d => d.target.data.label || '');\n\n    // Nodes with animations, collapse, hover glow\n    const node = g.selectAll('.node')\n      .data(treeData.descendants())\n      .enter().append('g')\n      .classed('node', true)\n      .attr('transform', `translate(${width / 2}, 50) scale(0.5)`)\n      .attr('opacity', 0)\n      .style('transition', 'transform 0.5s ease, opacity 0.5s ease')\n      .on('click', (event, d) => {\n        if (d.children || d._children) {\n          toggleNode(d);\n        }\n      })\n      .on('mouseover', function(event, d) {\n        d3.select(this).select('rect')\n          .attr('filter', 'url(#glow)')\n          .attr('stroke', '#3b82f6')\n          .attr('stroke-width', 3);\n        // Highlight connected links (incoming and outgoing)\n        g.selectAll('.link').filter(l => l.source === d || l.target === d)\n          .select('path').attr('stroke', '#3b82f6').attr('stroke-width', 3);\n      })\n      .on('mouseout', function(event, d) {\n        d3.select(this).select('rect')\n          .attr('filter', 'url(#shadow)')\n          .attr('stroke', '#e5e7eb')\n          .attr('stroke-width', 1);\n        g.selectAll('.link path').attr('stroke', '#9ca3af').attr('stroke-width', 2);\n      });\n\n    // Animate nodes in\n    node.transition()\n      .duration(500)\n      .attr('transform', d => `translate(${d.y},${d.x})`)\n      .attr('opacity', 1);\n\n    node.append('rect')\n      .attr('width', 140)\n      .attr('height', 50)\n      .attr('x', -70)\n      .attr('y', -25)\n      .attr('rx', 10)\n      .attr('ry', 10)\n      .attr('fill', d => colors[d.depth % colors.length] || '#ffffff')\n      .attr('stroke', '#e5e7eb')\n      .attr('stroke-width', 1)\n      .attr('filter', 'url(#shadow)');\n\n    node.append('text')\n      .attr('text-anchor', 'middle')\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('dy', '.35em')\n      .attr('font-size', '12px')\n      .attr('font-weight', 'bold')\n      .attr('fill', '#1f2937')\n      .text(d => d.data.name)\n      .style('pointer-events', 'none');\n\n    // Expand/collapse indicator (simplified, as full collapse needs _children handling)\n    node.filter(d => d.children && d.children.length > 0)\n      .append('text')\n      .attr('text-anchor', 'end')\n      .attr('x', 70)\n      .attr('y', 0)\n      .attr('font-size', '14px')\n      .attr('fill', '#6b7280')\n      .text('â–¶')\n      .style('cursor', 'pointer')\n      .on('click', (event, d) => {\n        event.stopPropagation();\n        toggleNode(d);\n      });\n  }, [iaData, error, width, height, expandedNodes, colors, toggleNode, buildHierarchy]);\n\n  useEffect(() => {\n    const handleKeyDown = (event) => {\n      if (event.target.tagName === 'INPUT' || event.target.tagName === 'TEXTAREA' || event.target.isContentEditable) {\n        return; // Don't interfere with input fields\n      }\n\n      switch (event.key) {\n        case '+':\n        case '=':\n          event.preventDefault();\n          zoomIn();\n          break;\n        case '-':\n          event.preventDefault();\n          zoomOut();\n          break;\n        case 'f':\n        case 'F':\n          event.preventDefault();\n          fitToScreen();\n          break;\n        case 'r':\n        case 'R':\n        case '0':\n          event.preventDefault();\n          resetView();\n          break;\n        default:\n          break;\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [zoomIn, zoomOut, fitToScreen, resetView]);\n\n  return (\n    <div className=\"flex flex-col h-screen bg-gradient-to-br from-blue-50 to-indigo-100\">\n      <div className=\"p-4 bg-white shadow-sm border-b flex justify-between items-center\">\n        <h1 className=\"text-2xl font-bold text-gray-800\">IA Flowchart Diagram</h1>\n        <div className=\"flex items-center space-x-2\">\n          <input\n            type=\"file\"\n            accept=\".json\"\n            onChange={handleFileUpload}\n            disabled={loading}\n            className=\"file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100\"\n          />\n          <button \n            onClick={fetchData} \n            disabled={loading} \n            className=\"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50\"\n          >\n            Refresh\n          </button>\n        </div>\n      </div>\n      {loading && <p className=\"p-2 text-blue-500 text-center\">Uploading...</p>}\n      {error && <p className=\"p-2 text-red-500 text-center\">{error}</p>}\n      <div className=\"flex-1 relative\">\n        <svg ref={svgRef} width={width} height={height} className=\"absolute inset-0 w-full h-full bg-white\">\n          <g ref={gRef}></g>\n        </svg>\n        {/* Floating Toolbar */}\n        <div className=\"absolute top-4 right-4 bg-white shadow-lg rounded-lg p-2 border flex flex-col space-y-1 z-10\">\n          <button onClick={zoomIn} className=\"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded text-gray-700\">+</button>\n          <button onClick={zoomOut} className=\"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded text-gray-700\">-</button>\n          <button onClick={fitToScreen} className=\"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded text-gray-700\">Fit</button>\n          <button onClick={resetView} className=\"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded text-gray-700\">Reset</button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}