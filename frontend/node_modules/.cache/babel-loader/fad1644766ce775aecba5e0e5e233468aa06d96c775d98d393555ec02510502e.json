{"ast":null,"code":"var _jsxFileName = \"/Users/anbschool0009/Desktop/IA-Mate_project/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [iaData, setIaData] = useState(null);\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const svgRef = useRef();\n  const handleFileUpload = async event => {\n    const file = event.target.files[0];\n    if (!file) return;\n    if (!file.name.endsWith('.json')) {\n      setError('Please select a JSON file.');\n      return;\n    }\n    setLoading(true);\n    setError('');\n    try {\n      const text = await file.text();\n      const jsonData = JSON.parse(text);\n      const response = await fetch('http://localhost:3001/upload', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(jsonData)\n      });\n      if (response.ok) {\n        setIaData(jsonData);\n        fetchData();\n      } else {\n        setError('Failed to upload JSON.');\n      }\n    } catch (err) {\n      setError('Invalid JSON file.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const fetchData = async () => {\n    try {\n      const response = await fetch('http://localhost:3001/ia');\n      if (response.ok) {\n        const data = await response.json();\n        setIaData(data);\n        setError('');\n      } else {\n        setIaData(null);\n        setError('No IA data uploaded yet.');\n      }\n    } catch (err) {\n      setError('Failed to fetch data.');\n    }\n  };\n  useEffect(() => {\n    fetchData();\n  }, []);\n  useEffect(() => {\n    if (!iaData || error) return;\n    const svg = d3.select(svgRef.current);\n    svg.selectAll('*').remove();\n    const width = 800;\n    const height = 600;\n    const tree = d3.tree().size([height, width - 160]);\n    const root = d3.hierarchy(iaData);\n    const treeData = tree(root);\n    const g = svg.append('g').attr('transform', 'translate(80,20)');\n\n    // Links\n    const link = g.selectAll('.link').data(treeData.links()).enter().append('path').attr('class', 'link').attr('d', d3.linkHorizontal().x(d => d.y).y(d => d.x)).attr('stroke', '#999').attr('fill', 'none');\n\n    // Nodes\n    const node = g.selectAll('.node').data(treeData.descendants()).enter().append('g').attr('class', 'node').attr('transform', d => `translate(${d.y},${d.x})`);\n    node.append('circle').attr('r', 5).attr('fill', '#fff').attr('stroke', '#000').attr('stroke-width', 1.5);\n    node.append('text').attr('dy', '.35em').attr('x', d => d.children ? -13 : 13).attr('text-anchor', d => d.children ? 'end' : 'start').text(d => d.data.name);\n  }, [iaData, error]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: '20px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"IA Tree Diagram\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      accept: \".json\",\n      onChange: handleFileUpload,\n      disabled: loading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: fetchData,\n      disabled: loading,\n      style: {\n        marginLeft: '10px'\n      },\n      children: \"Refresh\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Uploading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 19\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'red'\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n      ref: svgRef,\n      width: \"800\",\n      height: \"600\",\n      style: {\n        border: '1px solid #ccc',\n        marginTop: '20px'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"cMHRFjyLTpLhwteRPkCWEEU6AFk=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","d3","jsxDEV","_jsxDEV","App","_s","iaData","setIaData","error","setError","loading","setLoading","svgRef","handleFileUpload","event","file","target","files","name","endsWith","text","jsonData","JSON","parse","response","fetch","method","headers","body","stringify","ok","fetchData","err","data","json","svg","select","current","selectAll","remove","width","height","tree","size","root","hierarchy","treeData","g","append","attr","link","links","enter","linkHorizontal","x","d","y","node","descendants","children","style","padding","fileName","_jsxFileName","lineNumber","columnNumber","type","accept","onChange","disabled","onClick","marginLeft","color","ref","border","marginTop","_c","$RefreshReg$"],"sources":["/Users/anbschool0009/Desktop/IA-Mate_project/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\n\nfunction App() {\n  const [iaData, setIaData] = useState(null);\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const svgRef = useRef();\n\n  const handleFileUpload = async (event) => {\n    const file = event.target.files[0];\n    if (!file) return;\n\n    if (!file.name.endsWith('.json')) {\n      setError('Please select a JSON file.');\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n\n    try {\n      const text = await file.text();\n      const jsonData = JSON.parse(text);\n\n      const response = await fetch('http://localhost:3001/upload', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(jsonData),\n      });\n\n      if (response.ok) {\n        setIaData(jsonData);\n        fetchData();\n      } else {\n        setError('Failed to upload JSON.');\n      }\n    } catch (err) {\n      setError('Invalid JSON file.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchData = async () => {\n    try {\n      const response = await fetch('http://localhost:3001/ia');\n      if (response.ok) {\n        const data = await response.json();\n        setIaData(data);\n        setError('');\n      } else {\n        setIaData(null);\n        setError('No IA data uploaded yet.');\n      }\n    } catch (err) {\n      setError('Failed to fetch data.');\n    }\n  };\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  useEffect(() => {\n    if (!iaData || error) return;\n\n    const svg = d3.select(svgRef.current);\n    svg.selectAll('*').remove();\n\n    const width = 800;\n    const height = 600;\n\n    const tree = d3.tree().size([height, width - 160]);\n    const root = d3.hierarchy(iaData);\n    const treeData = tree(root);\n\n    const g = svg.append('g')\n      .attr('transform', 'translate(80,20)');\n\n    // Links\n    const link = g.selectAll('.link')\n      .data(treeData.links())\n      .enter().append('path')\n      .attr('class', 'link')\n      .attr('d', d3.linkHorizontal()\n        .x(d => d.y)\n        .y(d => d.x))\n      .attr('stroke', '#999')\n      .attr('fill', 'none');\n\n    // Nodes\n    const node = g.selectAll('.node')\n      .data(treeData.descendants())\n      .enter().append('g')\n      .attr('class', 'node')\n      .attr('transform', d => `translate(${d.y},${d.x})`);\n\n    node.append('circle')\n      .attr('r', 5)\n      .attr('fill', '#fff')\n      .attr('stroke', '#000')\n      .attr('stroke-width', 1.5);\n\n    node.append('text')\n      .attr('dy', '.35em')\n      .attr('x', d => d.children ? -13 : 13)\n      .attr('text-anchor', d => d.children ? 'end' : 'start')\n      .text(d => d.data.name);\n  }, [iaData, error]);\n\n  return (\n    <div style={{ padding: '20px' }}>\n      <h1>IA Tree Diagram</h1>\n      <input\n        type=\"file\"\n        accept=\".json\"\n        onChange={handleFileUpload}\n        disabled={loading}\n      />\n      <button onClick={fetchData} disabled={loading} style={{ marginLeft: '10px' }}>\n        Refresh\n      </button>\n      {loading && <p>Uploading...</p>}\n      {error && <p style={{ color: 'red' }}>{error}</p>}\n      <svg ref={svgRef} width=\"800\" height=\"600\" style={{ border: '1px solid #ccc', marginTop: '20px' }} />\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAC1D,OAAO,KAAKC,EAAE,MAAM,IAAI;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEzB,SAASC,GAAGA,CAAA,EAAG;EAAAC,EAAA;EACb,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGT,QAAQ,CAAC,IAAI,CAAC;EAC1C,MAAM,CAACU,KAAK,EAAEC,QAAQ,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACY,OAAO,EAAEC,UAAU,CAAC,GAAGb,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAMc,MAAM,GAAGZ,MAAM,CAAC,CAAC;EAEvB,MAAMa,gBAAgB,GAAG,MAAOC,KAAK,IAAK;IACxC,MAAMC,IAAI,GAAGD,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;IAClC,IAAI,CAACF,IAAI,EAAE;IAEX,IAAI,CAACA,IAAI,CAACG,IAAI,CAACC,QAAQ,CAAC,OAAO,CAAC,EAAE;MAChCV,QAAQ,CAAC,4BAA4B,CAAC;MACtC;IACF;IAEAE,UAAU,CAAC,IAAI,CAAC;IAChBF,QAAQ,CAAC,EAAE,CAAC;IAEZ,IAAI;MACF,MAAMW,IAAI,GAAG,MAAML,IAAI,CAACK,IAAI,CAAC,CAAC;MAC9B,MAAMC,QAAQ,GAAGC,IAAI,CAACC,KAAK,CAACH,IAAI,CAAC;MAEjC,MAAMI,QAAQ,GAAG,MAAMC,KAAK,CAAC,8BAA8B,EAAE;QAC3DC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEN,IAAI,CAACO,SAAS,CAACR,QAAQ;MAC/B,CAAC,CAAC;MAEF,IAAIG,QAAQ,CAACM,EAAE,EAAE;QACfvB,SAAS,CAACc,QAAQ,CAAC;QACnBU,SAAS,CAAC,CAAC;MACb,CAAC,MAAM;QACLtB,QAAQ,CAAC,wBAAwB,CAAC;MACpC;IACF,CAAC,CAAC,OAAOuB,GAAG,EAAE;MACZvB,QAAQ,CAAC,oBAAoB,CAAC;IAChC,CAAC,SAAS;MACRE,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAMoB,SAAS,GAAG,MAAAA,CAAA,KAAY;IAC5B,IAAI;MACF,MAAMP,QAAQ,GAAG,MAAMC,KAAK,CAAC,0BAA0B,CAAC;MACxD,IAAID,QAAQ,CAACM,EAAE,EAAE;QACf,MAAMG,IAAI,GAAG,MAAMT,QAAQ,CAACU,IAAI,CAAC,CAAC;QAClC3B,SAAS,CAAC0B,IAAI,CAAC;QACfxB,QAAQ,CAAC,EAAE,CAAC;MACd,CAAC,MAAM;QACLF,SAAS,CAAC,IAAI,CAAC;QACfE,QAAQ,CAAC,0BAA0B,CAAC;MACtC;IACF,CAAC,CAAC,OAAOuB,GAAG,EAAE;MACZvB,QAAQ,CAAC,uBAAuB,CAAC;IACnC;EACF,CAAC;EAEDV,SAAS,CAAC,MAAM;IACdgC,SAAS,CAAC,CAAC;EACb,CAAC,EAAE,EAAE,CAAC;EAENhC,SAAS,CAAC,MAAM;IACd,IAAI,CAACO,MAAM,IAAIE,KAAK,EAAE;IAEtB,MAAM2B,GAAG,GAAGlC,EAAE,CAACmC,MAAM,CAACxB,MAAM,CAACyB,OAAO,CAAC;IACrCF,GAAG,CAACG,SAAS,CAAC,GAAG,CAAC,CAACC,MAAM,CAAC,CAAC;IAE3B,MAAMC,KAAK,GAAG,GAAG;IACjB,MAAMC,MAAM,GAAG,GAAG;IAElB,MAAMC,IAAI,GAAGzC,EAAE,CAACyC,IAAI,CAAC,CAAC,CAACC,IAAI,CAAC,CAACF,MAAM,EAAED,KAAK,GAAG,GAAG,CAAC,CAAC;IAClD,MAAMI,IAAI,GAAG3C,EAAE,CAAC4C,SAAS,CAACvC,MAAM,CAAC;IACjC,MAAMwC,QAAQ,GAAGJ,IAAI,CAACE,IAAI,CAAC;IAE3B,MAAMG,CAAC,GAAGZ,GAAG,CAACa,MAAM,CAAC,GAAG,CAAC,CACtBC,IAAI,CAAC,WAAW,EAAE,kBAAkB,CAAC;;IAExC;IACA,MAAMC,IAAI,GAAGH,CAAC,CAACT,SAAS,CAAC,OAAO,CAAC,CAC9BL,IAAI,CAACa,QAAQ,CAACK,KAAK,CAAC,CAAC,CAAC,CACtBC,KAAK,CAAC,CAAC,CAACJ,MAAM,CAAC,MAAM,CAAC,CACtBC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CACrBA,IAAI,CAAC,GAAG,EAAEhD,EAAE,CAACoD,cAAc,CAAC,CAAC,CAC3BC,CAAC,CAACC,CAAC,IAAIA,CAAC,CAACC,CAAC,CAAC,CACXA,CAAC,CAACD,CAAC,IAAIA,CAAC,CAACD,CAAC,CAAC,CAAC,CACdL,IAAI,CAAC,QAAQ,EAAE,MAAM,CAAC,CACtBA,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC;;IAEvB;IACA,MAAMQ,IAAI,GAAGV,CAAC,CAACT,SAAS,CAAC,OAAO,CAAC,CAC9BL,IAAI,CAACa,QAAQ,CAACY,WAAW,CAAC,CAAC,CAAC,CAC5BN,KAAK,CAAC,CAAC,CAACJ,MAAM,CAAC,GAAG,CAAC,CACnBC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CACrBA,IAAI,CAAC,WAAW,EAAEM,CAAC,IAAI,aAAaA,CAAC,CAACC,CAAC,IAAID,CAAC,CAACD,CAAC,GAAG,CAAC;IAErDG,IAAI,CAACT,MAAM,CAAC,QAAQ,CAAC,CAClBC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CACZA,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC,CACpBA,IAAI,CAAC,QAAQ,EAAE,MAAM,CAAC,CACtBA,IAAI,CAAC,cAAc,EAAE,GAAG,CAAC;IAE5BQ,IAAI,CAACT,MAAM,CAAC,MAAM,CAAC,CAChBC,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC,CACnBA,IAAI,CAAC,GAAG,EAAEM,CAAC,IAAIA,CAAC,CAACI,QAAQ,GAAG,CAAC,EAAE,GAAG,EAAE,CAAC,CACrCV,IAAI,CAAC,aAAa,EAAEM,CAAC,IAAIA,CAAC,CAACI,QAAQ,GAAG,KAAK,GAAG,OAAO,CAAC,CACtDvC,IAAI,CAACmC,CAAC,IAAIA,CAAC,CAACtB,IAAI,CAACf,IAAI,CAAC;EAC3B,CAAC,EAAE,CAACZ,MAAM,EAAEE,KAAK,CAAC,CAAC;EAEnB,oBACEL,OAAA;IAAKyD,KAAK,EAAE;MAAEC,OAAO,EAAE;IAAO,CAAE;IAAAF,QAAA,gBAC9BxD,OAAA;MAAAwD,QAAA,EAAI;IAAe;MAAAG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eACxB9D,OAAA;MACE+D,IAAI,EAAC,MAAM;MACXC,MAAM,EAAC,OAAO;MACdC,QAAQ,EAAEvD,gBAAiB;MAC3BwD,QAAQ,EAAE3D;IAAQ;MAAAoD,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACnB,CAAC,eACF9D,OAAA;MAAQmE,OAAO,EAAEvC,SAAU;MAACsC,QAAQ,EAAE3D,OAAQ;MAACkD,KAAK,EAAE;QAAEW,UAAU,EAAE;MAAO,CAAE;MAAAZ,QAAA,EAAC;IAE9E;MAAAG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,EACRvD,OAAO,iBAAIP,OAAA;MAAAwD,QAAA,EAAG;IAAY;MAAAG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC,EAC9BzD,KAAK,iBAAIL,OAAA;MAAGyD,KAAK,EAAE;QAAEY,KAAK,EAAE;MAAM,CAAE;MAAAb,QAAA,EAAEnD;IAAK;MAAAsD,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eACjD9D,OAAA;MAAKsE,GAAG,EAAE7D,MAAO;MAAC4B,KAAK,EAAC,KAAK;MAACC,MAAM,EAAC,KAAK;MAACmB,KAAK,EAAE;QAAEc,MAAM,EAAE,gBAAgB;QAAEC,SAAS,EAAE;MAAO;IAAE;MAAAb,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAClG,CAAC;AAEV;AAAC5D,EAAA,CA7HQD,GAAG;AAAAwE,EAAA,GAAHxE,GAAG;AA+HZ,eAAeA,GAAG;AAAC,IAAAwE,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}